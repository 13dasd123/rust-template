using System;
using Facepunch;
using UnityEngine;

[AddComponentMenu("Facepunch/Skeleton")]
public class Skeleton : MonoBehaviour
{
	public SkeletonDefinition Source;

	public GameObject[] Bones;

	public Transform GetTransform(int id)
	{
		if (id < 0)
		{
			return null;
		}
		return Bones[id].transform;
	}

	public GameObject GetGameObject(int id)
	{
		if (id < 0)
		{
			return null;
		}
		return Bones[id];
	}

	public void CopyPositions(Skeleton to)
	{
		if (to.Source != Source)
		{
			throw new ArgumentException("Trying to copy transforms between different skeletons");
		}
		if (to.Bones.Length != Bones.Length)
		{
			throw new ArgumentException("Bone arrays are different sizes, skeleton might need rebuilding");
		}
		for (int i = 0; i < Bones.Length; i++)
		{
			if (!(Bones[i] == null) && !(to.Bones[i] == null))
			{
				to.Bones[i].transform.SetPositionAndRotation(Bones[i].transform.position, Bones[i].transform.rotation);
			}
		}
	}
}
