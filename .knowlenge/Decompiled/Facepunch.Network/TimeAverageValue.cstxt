using System;

public struct TimeAverageValue
{
	private DateTime refreshTime;

	private ulong counterPrev;

	private ulong counterNext;

	public ulong Calculate()
	{
		DateTime now = DateTime.Now;
		double num = now.Subtract(refreshTime).TotalSeconds;
		if (num >= 1.0)
		{
			num = 0.0;
			refreshTime = now;
			counterPrev = counterNext;
			counterNext = 0uL;
		}
		return (ulong)((double)counterPrev * (1.0 - num)) + counterNext;
	}

	public void Increment()
	{
		counterNext++;
	}

	public void Reset()
	{
		counterPrev = 0uL;
		counterNext = 0uL;
	}
}
