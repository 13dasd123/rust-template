using System;
using System.Runtime.InteropServices;
using SteamNative;

[StructLayout(LayoutKind.Sequential, Pack = 8)]
internal struct MatchMakingKeyValuePair_t
{
	[StructLayout(LayoutKind.Sequential, Pack = 4)]
	internal struct PackSmall
	{
		[MarshalAs(UnmanagedType.ByValTStr, SizeConst = 256)]
		public string Key;

		[MarshalAs(UnmanagedType.ByValTStr, SizeConst = 256)]
		public string Value;

		public static implicit operator MatchMakingKeyValuePair_t(PackSmall d)
		{
			MatchMakingKeyValuePair_t result = default(MatchMakingKeyValuePair_t);
			result.Key = d.Key;
			result.Value = d.Value;
			return result;
		}
	}

	[MarshalAs(UnmanagedType.ByValTStr, SizeConst = 256)]
	public string Key;

	[MarshalAs(UnmanagedType.ByValTStr, SizeConst = 256)]
	public string Value;

	public static MatchMakingKeyValuePair_t FromPointer(IntPtr p)
	{
		if (Platform.PackSmall)
		{
			return (PackSmall)Marshal.PtrToStructure(p, typeof(PackSmall));
		}
		return (MatchMakingKeyValuePair_t)Marshal.PtrToStructure(p, typeof(MatchMakingKeyValuePair_t));
	}
}
