using System;
using System.Linq;

public struct Ingredient
{
	public int DefinitionId;

	public Definition Definition;

	public int Count;

	internal static Ingredient FromString(string part, Definition[] definitions)
	{
		Ingredient i = default(Ingredient);
		i.Count = 1;
		try
		{
			if (part.Contains('x'))
			{
				int num = part.IndexOf('x');
				int result = 0;
				if (int.TryParse(part.Substring(num + 1), out result))
				{
					i.Count = result;
				}
				part = part.Substring(0, num);
			}
			i.DefinitionId = int.Parse(part);
			i.Definition = definitions.FirstOrDefault((Definition x) => x.Id == i.DefinitionId);
		}
		catch (Exception)
		{
			return i;
		}
		return i;
	}
}
