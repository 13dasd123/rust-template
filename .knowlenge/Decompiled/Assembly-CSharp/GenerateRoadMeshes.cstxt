using System.Collections.Generic;
using UnityEngine;

public class GenerateRoadMeshes : ProceduralComponent
{
	public Material RoadMaterial;

	public PhysicMaterial RoadPhysicMaterial;

	public override bool RunOnCache => true;

	public override void Process(uint seed)
	{
		List<PathList> roads = TerrainMeta.Path.Roads;
		foreach (PathList item in roads)
		{
			foreach (Mesh item2 in item.CreateMesh())
			{
				GameObject gameObject = new GameObject("Road Mesh");
				MeshCollider meshCollider = gameObject.AddComponent<MeshCollider>();
				meshCollider.sharedMaterial = RoadPhysicMaterial;
				meshCollider.sharedMesh = item2;
				gameObject.AddComponent<AddToHeightMap>();
				gameObject.layer = 16;
				GameObjectEx.SetHierarchyGroup(gameObject, item.Name);
			}
		}
	}
}
