using UnityEngine;

public class LightEx : UpdateBehaviour, IClientComponent
{
	public bool alterColor;

	public float colorTimeScale = 1f;

	public Color colorA = Color.red;

	public Color colorB = Color.yellow;

	public AnimationCurve blendCurve = new AnimationCurve();

	public bool loopColor = true;

	public bool alterIntensity;

	public float intensityTimeScale = 1f;

	public AnimationCurve intenseCurve = new AnimationCurve();

	public float intensityCurveScale = 3f;

	public bool loopIntensity = true;

	public bool randomOffset;

	protected void OnValidate()
	{
		CheckConflict(base.gameObject);
	}

	public static bool CheckConflict(GameObject go)
	{
		LightEx component = go.GetComponent<LightEx>();
		if (!component || !component.alterIntensity)
		{
			return false;
		}
		LightLOD component2 = go.GetComponent<LightLOD>();
		if ((bool)component2 && component2.ToggleLight)
		{
			Debug.LogError("Using LightEx.AlterIntensity and LightLOD.ToggleLight on the same light source is not permitted: " + go.transform.root.name, go.transform.root);
			return true;
		}
		AmbientLightLOD component3 = go.GetComponent<AmbientLightLOD>();
		if ((bool)component3)
		{
			Debug.LogError("Using LightEx.AlterIntensity and AmbientLightLOD on the same light source is not permitted: " + go.transform.root.name, go.transform.root);
			return true;
		}
		return false;
	}
}
