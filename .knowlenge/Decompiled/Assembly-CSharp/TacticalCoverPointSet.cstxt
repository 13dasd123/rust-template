using Rust.Ai;

public class TacticalCoverPointSet
{
	public TacticalCoverPoint Retreat;

	public TacticalCoverPoint Flank;

	public TacticalCoverPoint Advance;

	public TacticalCoverPoint Closest;

	public void Setup(NPCPlayerApex human)
	{
		Retreat.Human = human;
		Flank.Human = human;
		Advance.Human = human;
		Closest.Human = human;
	}

	public void Shutdown()
	{
		Reset();
	}

	public void Reset()
	{
		if (Retreat.ReservedCoverPoint != null)
		{
			Retreat.ReservedCoverPoint = null;
		}
		if (Flank.ReservedCoverPoint != null)
		{
			Flank.ReservedCoverPoint = null;
		}
		if (Advance.ReservedCoverPoint != null)
		{
			Advance.ReservedCoverPoint = null;
		}
		if (Closest.ReservedCoverPoint != null)
		{
			Closest.ReservedCoverPoint = null;
		}
	}

	public void Update(CoverPoint retreat, CoverPoint flank, CoverPoint advance)
	{
		Retreat.ReservedCoverPoint = retreat;
		Flank.ReservedCoverPoint = flank;
		Advance.ReservedCoverPoint = advance;
		Closest.ReservedCoverPoint = null;
		float num = float.MaxValue;
		if (retreat != null)
		{
			float sqrMagnitude = (retreat.Position - Retreat.Human.ServerPosition).sqrMagnitude;
			if (sqrMagnitude < num)
			{
				Closest.ReservedCoverPoint = retreat;
				num = sqrMagnitude;
			}
		}
		if (flank != null)
		{
			float sqrMagnitude2 = (flank.Position - Flank.Human.ServerPosition).sqrMagnitude;
			if (sqrMagnitude2 < num)
			{
				Closest.ReservedCoverPoint = flank;
				num = sqrMagnitude2;
			}
		}
		if (advance != null)
		{
			float sqrMagnitude3 = (advance.Position - Advance.Human.ServerPosition).sqrMagnitude;
			if (sqrMagnitude3 < num)
			{
				Closest.ReservedCoverPoint = advance;
				num = sqrMagnitude3;
			}
		}
	}
}
