using UnityEngine;
using UnityEngine.UI;

public class TweakUIToggle : MonoBehaviour
{
	public Toggle toggleControl;

	public string convarName = "effects.motionblur";

	public bool inverse;

	internal ConsoleSystem.Command conVar;

	protected void Awake()
	{
		conVar = ConsoleSystem.Index.Client.Find(convarName);
		if (conVar != null)
		{
			UpdateToggleState();
		}
		else
		{
			Debug.LogWarning("Tweak Toggle Convar Missing: " + convarName);
		}
	}

	protected void OnEnable()
	{
		UpdateToggleState();
	}

	public void OnToggleChanged()
	{
		UpdateConVar();
	}

	private void UpdateConVar()
	{
		if (conVar != null)
		{
			bool flag = toggleControl.isOn;
			if (inverse)
			{
				flag = !flag;
			}
			if (conVar.AsBool != flag)
			{
				conVar.Set(flag);
			}
		}
	}

	private void UpdateToggleState()
	{
		if (conVar != null)
		{
			bool flag = conVar.AsBool;
			if (inverse)
			{
				flag = !flag;
			}
			toggleControl.isOn = flag;
		}
	}
}
