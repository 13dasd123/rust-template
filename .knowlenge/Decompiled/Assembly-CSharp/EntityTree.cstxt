using System;
using Spatial;
using UnityEngine;

public class EntityTree
{
	private Grid<BaseEntity> Grid;

	public EntityTree(float worldSize)
	{
		Grid = new Grid<BaseEntity>(32, worldSize);
	}

	public void Add(BaseEntity ent)
	{
		Vector3 localPosition = ent.transform.localPosition;
		Grid.Add(ent, localPosition.x, localPosition.z);
	}

	public void Remove(BaseEntity ent)
	{
		Grid.Remove(ent);
	}

	public void Move(BaseEntity ent)
	{
		Vector3 localPosition = ent.transform.localPosition;
		Grid.Move(ent, localPosition.x, localPosition.z);
	}

	public int GetInSphere(Vector3 position, float distance, BaseEntity[] results, Func<BaseEntity, bool> filter = null)
	{
		return Grid.Query(position.x, position.z, distance, results, filter);
	}
}
