using UnityEngine;

public class SocketMod_AreaCheck : SocketMod
{
	public bool wantsInside = true;

	public LayerMask layerMask;

	private void OnDrawGizmosSelected()
	{
		Gizmos.matrix = base.transform.localToWorldMatrix;
		bool flag = true;
		if (!wantsInside)
		{
			flag = !flag;
		}
		Gizmos.color = ((!flag) ? Color.red : Color.green);
		Gizmos.DrawSphere(Vector3.zero, 0.05f);
	}

	public static bool IsInArea(Vector3 vPoint, LayerMask layerMask)
	{
		return GamePhysics.CheckSphere(vPoint, 0.05f, layerMask.value);
	}

	public override bool DoCheck(Construction.Placement place)
	{
		Vector3 vPoint = place.position + place.rotation * worldPosition;
		if (IsInArea(vPoint, layerMask) == wantsInside)
		{
			return true;
		}
		Construction.lastPlacementError = "Failed Check: IsInArea (" + hierachyName + ")";
		return false;
	}
}
