using System;
using UnityEngine;

[CreateAssetMenu(menuName = "Rust/MaterialEffect")]
public class MaterialEffect : ScriptableObject
{
	[Serializable]
	public class Entry
	{
		public PhysicMaterial Material;

		public GameObjectRef Effect;
	}

	public GameObjectRef DefaultEffect;

	public Entry[] Entries;

	public void SpawnOnRay(Ray ray, int mask, float length = 0.5f, Vector3 forward = default(Vector3))
	{
		if (!GamePhysics.Trace(ray, 0f, out var hitInfo, length, mask))
		{
			Effect.client.Run(DefaultEffect.resourcePath, ray.origin, ray.direction * -1f, forward);
		}
		else
		{
			Effect.client.Run(DefaultEffect.resourcePath, hitInfo.point, hitInfo.normal, forward);
		}
	}
}
