using UnityEngine;

public class GenerateRiverMeshes : ProceduralComponent
{
	public Material RiverMaterial;

	public PhysicMaterial RiverPhysicMaterial;

	public override bool RunOnCache => true;

	public override void Process(uint seed)
	{
		foreach (PathList river in TerrainMeta.Path.Rivers)
		{
			foreach (Mesh item in river.CreateMesh())
			{
				GameObject obj = new GameObject("River Mesh");
				MeshCollider meshCollider = obj.AddComponent<MeshCollider>();
				meshCollider.sharedMaterial = RiverPhysicMaterial;
				meshCollider.sharedMesh = item;
				obj.AddComponent<RiverInfo>();
				obj.AddComponent<WaterBody>();
				obj.AddComponent<AddToWaterMap>();
				obj.tag = "River";
				obj.layer = 4;
				GameObjectEx.SetHierarchyGroup(obj, river.Name);
			}
		}
	}
}
