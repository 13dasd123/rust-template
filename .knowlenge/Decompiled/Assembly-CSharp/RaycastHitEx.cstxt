using UnityEngine;

public static class RaycastHitEx
{
	public static Transform GetTransform(this RaycastHit hit)
	{
		if (hit.triangleIndex < 0)
		{
			return hit.transform;
		}
		if (!hit.transform.CompareTag("MeshColliderBatch"))
		{
			return hit.transform;
		}
		MeshColliderBatch component = hit.transform.GetComponent<MeshColliderBatch>();
		if (!component)
		{
			return hit.transform;
		}
		Transform transform = component.LookupTransform(hit.triangleIndex);
		if (!transform)
		{
			return hit.transform;
		}
		return transform;
	}

	public static Rigidbody GetRigidbody(this RaycastHit hit)
	{
		if (hit.triangleIndex < 0)
		{
			return hit.rigidbody;
		}
		if (!hit.transform.CompareTag("MeshColliderBatch"))
		{
			return hit.rigidbody;
		}
		MeshColliderBatch component = hit.transform.GetComponent<MeshColliderBatch>();
		if (!component)
		{
			return hit.rigidbody;
		}
		Rigidbody rigidbody = component.LookupRigidbody(hit.triangleIndex);
		if (!rigidbody)
		{
			return hit.rigidbody;
		}
		return rigidbody;
	}

	public static Collider GetCollider(this RaycastHit hit)
	{
		if (hit.triangleIndex < 0)
		{
			return hit.collider;
		}
		if (!hit.transform.CompareTag("MeshColliderBatch"))
		{
			return hit.collider;
		}
		MeshColliderBatch component = hit.transform.GetComponent<MeshColliderBatch>();
		if (!component)
		{
			return hit.collider;
		}
		Collider collider = component.LookupCollider(hit.triangleIndex);
		if (!collider)
		{
			return hit.collider;
		}
		return collider;
	}

	public static BaseEntity GetEntity(this RaycastHit hit)
	{
		return GameObjectEx.ToBaseEntity(GetTransform(hit).gameObject);
	}
}
