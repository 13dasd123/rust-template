using System;
using UnityEngine;

public class ScaleTrailRenderer : ScaleRenderer
{
	private TrailRenderer trailRenderer;

	[NonSerialized]
	private float startWidth;

	[NonSerialized]
	private float endWidth;

	[NonSerialized]
	private float duration;

	public override void GatherInitialValues()
	{
		base.GatherInitialValues();
		if ((bool)myRenderer)
		{
			trailRenderer = myRenderer.GetComponent<TrailRenderer>();
		}
		else
		{
			trailRenderer = GetComponentInChildren<TrailRenderer>();
		}
		startWidth = trailRenderer.startWidth;
		endWidth = trailRenderer.endWidth;
		duration = trailRenderer.time;
	}

	public override void SetScale_Internal(float scale)
	{
		base.SetScale_Internal(scale);
		trailRenderer.startWidth = startWidth * scale;
		trailRenderer.endWidth = endWidth * scale;
		trailRenderer.time = duration * scale;
	}
}
