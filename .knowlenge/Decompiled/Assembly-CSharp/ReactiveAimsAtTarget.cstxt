using ConVar;
using UnityEngine;

public class ReactiveAimsAtTarget : BaseScorer
{
	public override float GetScore(BaseContext c)
	{
		return Test(c as NPCHumanContext);
	}

	public static float Test(NPCHumanContext c)
	{
		if (c.Human == null || c.Human.transform == null || c.Human.IsDestroyed || c.Human.AttackTarget == null || c.Human.AttackTarget.transform == null || c.Human.AttackTarget.IsDestroyed)
		{
			return 0f;
		}
		Vector3 normalized = (c.Human.AttackTarget.ServerPosition - c.Position).normalized;
		float num = Vector3.Dot(c.Human.eyes.BodyForward(), normalized);
		if (c.Human.isMounted)
		{
			if (!(num >= ConVar.AI.npc_valid_mounted_aim_cone))
			{
				return 0f;
			}
			return 1f;
		}
		if (!(num >= ConVar.AI.npc_valid_aim_cone))
		{
			return 0f;
		}
		return 1f;
	}
}
