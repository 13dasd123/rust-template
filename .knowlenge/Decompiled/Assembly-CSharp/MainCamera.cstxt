using Kino;
using Smaa;
using UnityEngine;
using UnityEngine.Rendering.PostProcessing;
using UnityStandardAssets.CinematicEffects;
using UnityStandardAssets.ImageEffects;

[ExecuteInEditMode]
public class MainCamera : SingletonComponent<MainCamera>
{
	public static Camera mainCamera;

	public UnityStandardAssets.ImageEffects.DepthOfField dof;

	public AmplifyOcclusionEffect ssao;

	public Kino.Motion motionBlur;

	public TOD_Rays shafts;

	public TonemappingColorGrading tonemappingColorGrading;

	public FXAA fxaa;

	public SMAA smaa;

	public PostProcessLayer post;

	public CC_SharpenAndVignette sharpenAndVignette;

	public SEScreenSpaceShadows contactShadows;

	public VisualizeTexelDensity visualizeTexelDensity;

	private TOD_Scattering todScattering;

	private float ambientLightDay = -1f;

	private float ambientLightNight = -1f;

	private float ambientLightMultiplier = 1f;

	private float ambientLightMultiplierTarget = 1f;

	private float skyReflectionDay = -1f;

	private float skyReflectionNight = -1f;

	private float skyReflectionMultiplier = 1f;

	private float skyReflectionMultiplierTarget = 1f;

	private float environmentTimestamp;

	private EnvironmentType environmentType;

	private bool waterVisible;

	private int screenWidth;

	private int screenHeight;

	public static bool isValid => mainCamera != null && mainCamera.enabled;

	public static Vector3 position
	{
		get
		{
			return mainCamera.transform.position;
		}
		set
		{
			mainCamera.transform.position = value;
		}
	}

	public static Vector3 forward
	{
		get
		{
			return mainCamera.transform.forward;
		}
		set
		{
			if (value.sqrMagnitude > 0f)
			{
				mainCamera.transform.forward = value;
			}
		}
	}

	public static Vector3 right
	{
		get
		{
			return mainCamera.transform.right;
		}
		set
		{
			if (value.sqrMagnitude > 0f)
			{
				mainCamera.transform.right = value;
			}
		}
	}

	public static Vector3 up
	{
		get
		{
			return mainCamera.transform.up;
		}
		set
		{
			if (value.sqrMagnitude > 0f)
			{
				mainCamera.transform.up = value;
			}
		}
	}

	public static Quaternion rotation => mainCamera.transform.rotation;

	public static bool isWaterVisible => !(SingletonComponent<MainCamera>.Instance != null) || SingletonComponent<MainCamera>.Instance.waterVisible;

	public static Ray Ray => new Ray(position, forward);

	public static RaycastHit Raycast
	{
		get
		{
			Physics.Raycast(Ray, out var hitInfo, 1024f, 94464769);
			return hitInfo;
		}
	}

	public static bool InEnvironment(EnvironmentType type)
	{
		if (SingletonComponent<MainCamera>.Instance == null)
		{
			return false;
		}
		return (SingletonComponent<MainCamera>.Instance.environmentType & type) != 0;
	}
}
