using System.Collections.Generic;
using UnityEngine;

public class PrefabPool
{
	public Stack<PrefabInfo> stack = new Stack<PrefabInfo>();

	public int Count => stack.Count;

	public void Push(PrefabInfo info)
	{
		stack.Push(info);
		info.EnterPool();
	}

	public void Push(GameObject instance)
	{
		PrefabInfo component = instance.GetComponent<PrefabInfo>();
		Push(component);
	}

	public GameObject Pop(Vector3 pos = default(Vector3), Quaternion rot = default(Quaternion))
	{
		while (stack.Count > 0)
		{
			PrefabInfo prefabInfo = stack.Pop();
			if ((bool)prefabInfo)
			{
				prefabInfo.transform.position = pos;
				prefabInfo.transform.rotation = rot;
				prefabInfo.LeavePool();
				return prefabInfo.gameObject;
			}
		}
		return null;
	}

	public void Clear()
	{
		foreach (PrefabInfo item in stack)
		{
			if ((bool)item)
			{
				Object.Destroy(item);
			}
		}
		stack.Clear();
	}
}
