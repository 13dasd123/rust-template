using System;

[Serializable]
public class ConversationCondition
{
	public enum ConditionType
	{
		NONE,
		HASHEALTH,
		HASSCRAP,
		PROVIDERBUSY,
		MISSIONCOMPLETE,
		MISSIONATTEMPTED,
		CANACCEPT
	}

	public ConditionType conditionType;

	public uint conditionAmount;

	public bool inverse;

	public string failedSpeechNode;

	public bool Passes(BasePlayer player, IConversationProvider provider)
	{
		bool flag = false;
		if (conditionType == ConditionType.HASSCRAP)
		{
			flag = player.inventory.GetAmount(ItemManager.FindItemDefinition("scrap").itemid) >= conditionAmount;
		}
		else if (conditionType == ConditionType.HASHEALTH)
		{
			flag = player.health >= (float)conditionAmount;
		}
		else if (conditionType == ConditionType.PROVIDERBUSY)
		{
			flag = provider.ProviderBusy();
		}
		else if (conditionType == ConditionType.MISSIONCOMPLETE)
		{
			flag = player.HasCompletedMission(conditionAmount);
		}
		else if (conditionType == ConditionType.MISSIONATTEMPTED)
		{
			flag = player.HasAttemptedMission(conditionAmount);
		}
		else if (conditionType == ConditionType.CANACCEPT)
		{
			flag = player.CanAcceptMission(conditionAmount);
		}
		if (!inverse)
		{
			return flag;
		}
		return !flag;
	}
}
