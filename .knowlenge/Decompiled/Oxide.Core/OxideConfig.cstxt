using System.Collections;
using System.Collections.Generic;
using Newtonsoft.Json;
using Oxide.Core.Configuration;

public class OxideConfig : ConfigFile
{
	public class OxideOptions
	{
		public bool Modded;

		public DefaultGroups DefaultGroups;
	}

	[JsonObject]
	public class DefaultGroups : IEnumerable<string>, IEnumerable
	{
		public string Players;

		public string Administrators;

		public IEnumerator<string> GetEnumerator()
		{
			yield return Players;
			yield return Administrators;
		}

		IEnumerator IEnumerable.GetEnumerator()
		{
			return GetEnumerator();
		}
	}

	public class OxideConsole
	{
		public bool Enabled { get; set; }

		public bool MinimalistMode { get; set; }

		public bool ShowStatusBar { get; set; }
	}

	public class OxideRcon
	{
		public bool Enabled { get; set; }

		public int Port { get; set; }

		public string Password { get; set; }

		public string ChatPrefix { get; set; }
	}

	public OxideOptions Options { get; set; }

	[JsonProperty(PropertyName = "OxideConsole")]
	public OxideConsole Console { get; set; }

	[JsonProperty(PropertyName = "OxideRcon")]
	public OxideRcon Rcon { get; set; }

	public OxideConfig(string filename)
		: base(filename)
	{
		Options = new OxideOptions
		{
			Modded = true,
			DefaultGroups = new DefaultGroups
			{
				Administrators = "admin",
				Players = "default"
			}
		};
		Console = new OxideConsole
		{
			Enabled = true,
			MinimalistMode = true,
			ShowStatusBar = true
		};
		Rcon = new OxideRcon
		{
			Enabled = false,
			ChatPrefix = "[Server Console]",
			Port = 25580,
			Password = string.Empty
		};
	}
}
