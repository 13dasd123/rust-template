using System.Collections.Generic;

public static class List
{
	public static void Compare<T>(this List<T> a, List<T> b, List<T> added, List<T> removed, List<T> remained)
	{
		if ((a.Count == 0 && b.Count == 0) || (a == null && b == null))
		{
			return;
		}
		if (a == null)
		{
			added?.AddRange(b);
			return;
		}
		if (b == null)
		{
			removed?.AddRange(a);
			return;
		}
		added?.AddRange(b);
		removed?.AddRange(a);
		foreach (T item in b)
		{
			if (!a.Contains(item))
			{
				continue;
			}
			remained?.Add(item);
			if (added != null)
			{
				while (added.Remove(item))
				{
				}
			}
			if (removed != null)
			{
				while (removed.Remove(item))
				{
				}
			}
		}
	}
}
