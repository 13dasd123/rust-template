using System;
using System.IO;
using Facepunch;
using ProtoBuf;
using SilentOrbit.ProtocolBuffers;

public class Entity : IDisposable, Pool.IPooled, IProto
{
	public bool ShouldPool = true;

	private bool _disposed;

	[NonSerialized]
	public BaseNetworkable baseNetworkable;

	[NonSerialized]
	public BaseEntity baseEntity;

	[NonSerialized]
	public BasePlayer basePlayer;

	[NonSerialized]
	public WorldItem worldItem;

	[NonSerialized]
	public BaseResource resource;

	[NonSerialized]
	public BuildingBlock buildingBlock;

	[NonSerialized]
	public ProtoBuf.Environment environment;

	[NonSerialized]
	public Corpse corpse;

	[NonSerialized]
	public ParentInfo parent;

	[NonSerialized]
	public KeyLock keyLock;

	[NonSerialized]
	public CodeLock codeLock;

	[NonSerialized]
	public EntitySlots entitySlots;

	[NonSerialized]
	public BuildingPrivilege buildingPrivilege;

	[NonSerialized]
	public StorageBox storageBox;

	[NonSerialized]
	public HeldEntity heldEntity;

	[NonSerialized]
	public BaseProjectile baseProjectile;

	[NonSerialized]
	public BaseNPC baseNPC;

	[NonSerialized]
	public Loot loot;

	[NonSerialized]
	public GenericSpawner genericSpawner;

	[NonSerialized]
	public SleepingBag sleepingBag;

	[NonSerialized]
	public LootableCorpse lootableCorpse;

	[NonSerialized]
	public Sign sign;

	[NonSerialized]
	public BaseCombat baseCombat;

	[NonSerialized]
	public MapEntity mapEntity;

	[NonSerialized]
	public ResearchTable researchTable;

	[NonSerialized]
	public DudExplosive dudExplosive;

	[NonSerialized]
	public MiningQuarry miningQuarry;

	[NonSerialized]
	public Helicopter helicopter;

	[NonSerialized]
	public Landmine landmine;

	[NonSerialized]
	public AutoTurret autoturret;

	[NonSerialized]
	public SphereEntity sphereEntity;

	[NonSerialized]
	public StabilityEntity stabilityEntity;

	[NonSerialized]
	public OwnerInfo ownerInfo;

	[NonSerialized]
	public DecayEntity decayEntity;

	[NonSerialized]
	public Spawnable spawnable;

	[NonSerialized]
	public ServerGib servergib;

	[NonSerialized]
	public VendingMachine vendingMachine;

	[NonSerialized]
	public SpinnerWheel spinnerWheel;

	[NonSerialized]
	public Lift lift;

	[NonSerialized]
	public BradleyAPC bradley;

	[NonSerialized]
	public WaterWell waterwell;

	[NonSerialized]
	public Motorboat motorBoat;

	[NonSerialized]
	public IOEntity ioEntity;

	[NonSerialized]
	public PuzzleReset puzzleReset;

	[NonSerialized]
	public RelationshipManager relationshipManager;

	[NonSerialized]
	public HotAirBalloon hotAirBalloon;

	[NonSerialized]
	public SAMSite samSite;

	[NonSerialized]
	public EggHunt eggHunt;

	[NonSerialized]
	public ArcadeMachine arcadeMachine;

	[NonSerialized]
	public Minicopter miniCopter;

	[NonSerialized]
	public Horse horse;

	[NonSerialized]
	public SmartAlarm smartAlarm;

	[NonSerialized]
	public LightString lightString;

	[NonSerialized]
	public LightDeployer lightDeployer;

	[NonSerialized]
	public RCEntity rcEntity;

	[NonSerialized]
	public ComputerStation computerStation;

	[NonSerialized]
	public GrowableEntity growableEntity;

	[NonSerialized]
	public Composter composter;

	[NonSerialized]
	public ModularVehicle modularVehicle;

	[NonSerialized]
	public ModularCar modularCar;

	[NonSerialized]
	public SimpleUID simpleUID;

	[NonSerialized]
	public VehicleLift vehicleLift;

	[NonSerialized]
	public EngineStorage engineStorage;

	[NonSerialized]
	public VehicleVendor vehicleVendor;

	[NonSerialized]
	public WaterPool WaterPool;

	[NonSerialized]
	public Photo photo;

	[NonSerialized]
	public PhotoFrame photoFrame;

	[NonSerialized]
	public VehicleModule vehicleModule;

	[NonSerialized]
	public MixingTable mixingTable;

	[NonSerialized]
	public ShopKeeper shopKeeper;

	[NonSerialized]
	public Elevator elevator;

	[NonSerialized]
	public SkullTrophy skullTrophy;

	[NonSerialized]
	public Cassette cassette;

	[NonSerialized]
	public Telephone telephone;

	[NonSerialized]
	public BoomBox boomBox;

	[NonSerialized]
	public bool createdThisFrame;

	public static void ResetToPool(Entity instance)
	{
		if (instance.ShouldPool)
		{
			if (instance.baseNetworkable != null)
			{
				instance.baseNetworkable.ResetToPool();
				instance.baseNetworkable = null;
			}
			if (instance.baseEntity != null)
			{
				instance.baseEntity.ResetToPool();
				instance.baseEntity = null;
			}
			if (instance.basePlayer != null)
			{
				instance.basePlayer.ResetToPool();
				instance.basePlayer = null;
			}
			if (instance.worldItem != null)
			{
				instance.worldItem.ResetToPool();
				instance.worldItem = null;
			}
			if (instance.resource != null)
			{
				instance.resource.ResetToPool();
				instance.resource = null;
			}
			if (instance.buildingBlock != null)
			{
				instance.buildingBlock.ResetToPool();
				instance.buildingBlock = null;
			}
			if (instance.environment != null)
			{
				instance.environment.ResetToPool();
				instance.environment = null;
			}
			if (instance.corpse != null)
			{
				instance.corpse.ResetToPool();
				instance.corpse = null;
			}
			if (instance.parent != null)
			{
				instance.parent.ResetToPool();
				instance.parent = null;
			}
			if (instance.keyLock != null)
			{
				instance.keyLock.ResetToPool();
				instance.keyLock = null;
			}
			if (instance.codeLock != null)
			{
				instance.codeLock.ResetToPool();
				instance.codeLock = null;
			}
			if (instance.entitySlots != null)
			{
				instance.entitySlots.ResetToPool();
				instance.entitySlots = null;
			}
			if (instance.buildingPrivilege != null)
			{
				instance.buildingPrivilege.ResetToPool();
				instance.buildingPrivilege = null;
			}
			if (instance.storageBox != null)
			{
				instance.storageBox.ResetToPool();
				instance.storageBox = null;
			}
			if (instance.heldEntity != null)
			{
				instance.heldEntity.ResetToPool();
				instance.heldEntity = null;
			}
			if (instance.baseProjectile != null)
			{
				instance.baseProjectile.ResetToPool();
				instance.baseProjectile = null;
			}
			if (instance.baseNPC != null)
			{
				instance.baseNPC.ResetToPool();
				instance.baseNPC = null;
			}
			if (instance.loot != null)
			{
				instance.loot.ResetToPool();
				instance.loot = null;
			}
			if (instance.genericSpawner != null)
			{
				instance.genericSpawner.ResetToPool();
				instance.genericSpawner = null;
			}
			if (instance.sleepingBag != null)
			{
				instance.sleepingBag.ResetToPool();
				instance.sleepingBag = null;
			}
			if (instance.lootableCorpse != null)
			{
				instance.lootableCorpse.ResetToPool();
				instance.lootableCorpse = null;
			}
			if (instance.sign != null)
			{
				instance.sign.ResetToPool();
				instance.sign = null;
			}
			if (instance.baseCombat != null)
			{
				instance.baseCombat.ResetToPool();
				instance.baseCombat = null;
			}
			if (instance.mapEntity != null)
			{
				instance.mapEntity.ResetToPool();
				instance.mapEntity = null;
			}
			if (instance.researchTable != null)
			{
				instance.researchTable.ResetToPool();
				instance.researchTable = null;
			}
			if (instance.dudExplosive != null)
			{
				instance.dudExplosive.ResetToPool();
				instance.dudExplosive = null;
			}
			if (instance.miningQuarry != null)
			{
				instance.miningQuarry.ResetToPool();
				instance.miningQuarry = null;
			}
			if (instance.helicopter != null)
			{
				instance.helicopter.ResetToPool();
				instance.helicopter = null;
			}
			if (instance.landmine != null)
			{
				instance.landmine.ResetToPool();
				instance.landmine = null;
			}
			if (instance.autoturret != null)
			{
				instance.autoturret.ResetToPool();
				instance.autoturret = null;
			}
			if (instance.sphereEntity != null)
			{
				instance.sphereEntity.ResetToPool();
				instance.sphereEntity = null;
			}
			if (instance.stabilityEntity != null)
			{
				instance.stabilityEntity.ResetToPool();
				instance.stabilityEntity = null;
			}
			if (instance.ownerInfo != null)
			{
				instance.ownerInfo.ResetToPool();
				instance.ownerInfo = null;
			}
			if (instance.decayEntity != null)
			{
				instance.decayEntity.ResetToPool();
				instance.decayEntity = null;
			}
			if (instance.spawnable != null)
			{
				instance.spawnable.ResetToPool();
				instance.spawnable = null;
			}
			if (instance.servergib != null)
			{
				instance.servergib.ResetToPool();
				instance.servergib = null;
			}
			if (instance.vendingMachine != null)
			{
				instance.vendingMachine.ResetToPool();
				instance.vendingMachine = null;
			}
			if (instance.spinnerWheel != null)
			{
				instance.spinnerWheel.ResetToPool();
				instance.spinnerWheel = null;
			}
			if (instance.lift != null)
			{
				instance.lift.ResetToPool();
				instance.lift = null;
			}
			if (instance.bradley != null)
			{
				instance.bradley.ResetToPool();
				instance.bradley = null;
			}
			if (instance.waterwell != null)
			{
				instance.waterwell.ResetToPool();
				instance.waterwell = null;
			}
			if (instance.motorBoat != null)
			{
				instance.motorBoat.ResetToPool();
				instance.motorBoat = null;
			}
			if (instance.ioEntity != null)
			{
				instance.ioEntity.ResetToPool();
				instance.ioEntity = null;
			}
			if (instance.puzzleReset != null)
			{
				instance.puzzleReset.ResetToPool();
				instance.puzzleReset = null;
			}
			if (instance.relationshipManager != null)
			{
				instance.relationshipManager.ResetToPool();
				instance.relationshipManager = null;
			}
			if (instance.hotAirBalloon != null)
			{
				instance.hotAirBalloon.ResetToPool();
				instance.hotAirBalloon = null;
			}
			if (instance.samSite != null)
			{
				instance.samSite.ResetToPool();
				instance.samSite = null;
			}
			if (instance.eggHunt != null)
			{
				instance.eggHunt.ResetToPool();
				instance.eggHunt = null;
			}
			if (instance.arcadeMachine != null)
			{
				instance.arcadeMachine.ResetToPool();
				instance.arcadeMachine = null;
			}
			if (instance.miniCopter != null)
			{
				instance.miniCopter.ResetToPool();
				instance.miniCopter = null;
			}
			if (instance.horse != null)
			{
				instance.horse.ResetToPool();
				instance.horse = null;
			}
			if (instance.smartAlarm != null)
			{
				instance.smartAlarm.ResetToPool();
				instance.smartAlarm = null;
			}
			if (instance.lightString != null)
			{
				instance.lightString.ResetToPool();
				instance.lightString = null;
			}
			if (instance.lightDeployer != null)
			{
				instance.lightDeployer.ResetToPool();
				instance.lightDeployer = null;
			}
			if (instance.rcEntity != null)
			{
				instance.rcEntity.ResetToPool();
				instance.rcEntity = null;
			}
			if (instance.computerStation != null)
			{
				instance.computerStation.ResetToPool();
				instance.computerStation = null;
			}
			if (instance.growableEntity != null)
			{
				instance.growableEntity.ResetToPool();
				instance.growableEntity = null;
			}
			if (instance.composter != null)
			{
				instance.composter.ResetToPool();
				instance.composter = null;
			}
			if (instance.modularVehicle != null)
			{
				instance.modularVehicle.ResetToPool();
				instance.modularVehicle = null;
			}
			if (instance.modularCar != null)
			{
				instance.modularCar.ResetToPool();
				instance.modularCar = null;
			}
			if (instance.simpleUID != null)
			{
				instance.simpleUID.ResetToPool();
				instance.simpleUID = null;
			}
			if (instance.vehicleLift != null)
			{
				instance.vehicleLift.ResetToPool();
				instance.vehicleLift = null;
			}
			if (instance.engineStorage != null)
			{
				instance.engineStorage.ResetToPool();
				instance.engineStorage = null;
			}
			if (instance.vehicleVendor != null)
			{
				instance.vehicleVendor.ResetToPool();
				instance.vehicleVendor = null;
			}
			if (instance.WaterPool != null)
			{
				instance.WaterPool.ResetToPool();
				instance.WaterPool = null;
			}
			if (instance.photo != null)
			{
				instance.photo.ResetToPool();
				instance.photo = null;
			}
			if (instance.photoFrame != null)
			{
				instance.photoFrame.ResetToPool();
				instance.photoFrame = null;
			}
			if (instance.vehicleModule != null)
			{
				instance.vehicleModule.ResetToPool();
				instance.vehicleModule = null;
			}
			if (instance.mixingTable != null)
			{
				instance.mixingTable.ResetToPool();
				instance.mixingTable = null;
			}
			if (instance.shopKeeper != null)
			{
				instance.shopKeeper.ResetToPool();
				instance.shopKeeper = null;
			}
			if (instance.elevator != null)
			{
				instance.elevator.ResetToPool();
				instance.elevator = null;
			}
			if (instance.skullTrophy != null)
			{
				instance.skullTrophy.ResetToPool();
				instance.skullTrophy = null;
			}
			if (instance.cassette != null)
			{
				instance.cassette.ResetToPool();
				instance.cassette = null;
			}
			if (instance.telephone != null)
			{
				instance.telephone.ResetToPool();
				instance.telephone = null;
			}
			if (instance.boomBox != null)
			{
				instance.boomBox.ResetToPool();
				instance.boomBox = null;
			}
			instance.createdThisFrame = false;
			Pool.Free(ref instance);
		}
	}

	public void ResetToPool()
	{
		ResetToPool(this);
	}

	public virtual void Dispose()
	{
		if (!ShouldPool)
		{
			throw new Exception("Trying to dispose Entity with ShouldPool set to false!");
		}
		if (!_disposed)
		{
			ResetToPool();
			_disposed = true;
		}
	}

	public virtual void EnterPool()
	{
		_disposed = true;
	}

	public virtual void LeavePool()
	{
		_disposed = false;
	}

	public void CopyTo(Entity instance)
	{
		if (baseNetworkable != null)
		{
			if (instance.baseNetworkable == null)
			{
				instance.baseNetworkable = baseNetworkable.Copy();
			}
			else
			{
				baseNetworkable.CopyTo(instance.baseNetworkable);
			}
		}
		else
		{
			instance.baseNetworkable = null;
		}
		if (baseEntity != null)
		{
			if (instance.baseEntity == null)
			{
				instance.baseEntity = baseEntity.Copy();
			}
			else
			{
				baseEntity.CopyTo(instance.baseEntity);
			}
		}
		else
		{
			instance.baseEntity = null;
		}
		if (basePlayer != null)
		{
			if (instance.basePlayer == null)
			{
				instance.basePlayer = basePlayer.Copy();
			}
			else
			{
				basePlayer.CopyTo(instance.basePlayer);
			}
		}
		else
		{
			instance.basePlayer = null;
		}
		if (worldItem != null)
		{
			if (instance.worldItem == null)
			{
				instance.worldItem = worldItem.Copy();
			}
			else
			{
				worldItem.CopyTo(instance.worldItem);
			}
		}
		else
		{
			instance.worldItem = null;
		}
		if (resource != null)
		{
			if (instance.resource == null)
			{
				instance.resource = resource.Copy();
			}
			else
			{
				resource.CopyTo(instance.resource);
			}
		}
		else
		{
			instance.resource = null;
		}
		if (buildingBlock != null)
		{
			if (instance.buildingBlock == null)
			{
				instance.buildingBlock = buildingBlock.Copy();
			}
			else
			{
				buildingBlock.CopyTo(instance.buildingBlock);
			}
		}
		else
		{
			instance.buildingBlock = null;
		}
		if (environment != null)
		{
			if (instance.environment == null)
			{
				instance.environment = environment.Copy();
			}
			else
			{
				environment.CopyTo(instance.environment);
			}
		}
		else
		{
			instance.environment = null;
		}
		if (corpse != null)
		{
			if (instance.corpse == null)
			{
				instance.corpse = corpse.Copy();
			}
			else
			{
				corpse.CopyTo(instance.corpse);
			}
		}
		else
		{
			instance.corpse = null;
		}
		if (parent != null)
		{
			if (instance.parent == null)
			{
				instance.parent = parent.Copy();
			}
			else
			{
				parent.CopyTo(instance.parent);
			}
		}
		else
		{
			instance.parent = null;
		}
		if (keyLock != null)
		{
			if (instance.keyLock == null)
			{
				instance.keyLock = keyLock.Copy();
			}
			else
			{
				keyLock.CopyTo(instance.keyLock);
			}
		}
		else
		{
			instance.keyLock = null;
		}
		if (codeLock != null)
		{
			if (instance.codeLock == null)
			{
				instance.codeLock = codeLock.Copy();
			}
			else
			{
				codeLock.CopyTo(instance.codeLock);
			}
		}
		else
		{
			instance.codeLock = null;
		}
		if (entitySlots != null)
		{
			if (instance.entitySlots == null)
			{
				instance.entitySlots = entitySlots.Copy();
			}
			else
			{
				entitySlots.CopyTo(instance.entitySlots);
			}
		}
		else
		{
			instance.entitySlots = null;
		}
		if (buildingPrivilege != null)
		{
			if (instance.buildingPrivilege == null)
			{
				instance.buildingPrivilege = buildingPrivilege.Copy();
			}
			else
			{
				buildingPrivilege.CopyTo(instance.buildingPrivilege);
			}
		}
		else
		{
			instance.buildingPrivilege = null;
		}
		if (storageBox != null)
		{
			if (instance.storageBox == null)
			{
				instance.storageBox = storageBox.Copy();
			}
			else
			{
				storageBox.CopyTo(instance.storageBox);
			}
		}
		else
		{
			instance.storageBox = null;
		}
		if (heldEntity != null)
		{
			if (instance.heldEntity == null)
			{
				instance.heldEntity = heldEntity.Copy();
			}
			else
			{
				heldEntity.CopyTo(instance.heldEntity);
			}
		}
		else
		{
			instance.heldEntity = null;
		}
		if (baseProjectile != null)
		{
			if (instance.baseProjectile == null)
			{
				instance.baseProjectile = baseProjectile.Copy();
			}
			else
			{
				baseProjectile.CopyTo(instance.baseProjectile);
			}
		}
		else
		{
			instance.baseProjectile = null;
		}
		if (baseNPC != null)
		{
			if (instance.baseNPC == null)
			{
				instance.baseNPC = baseNPC.Copy();
			}
			else
			{
				baseNPC.CopyTo(instance.baseNPC);
			}
		}
		else
		{
			instance.baseNPC = null;
		}
		if (loot != null)
		{
			if (instance.loot == null)
			{
				instance.loot = loot.Copy();
			}
			else
			{
				loot.CopyTo(instance.loot);
			}
		}
		else
		{
			instance.loot = null;
		}
		if (genericSpawner != null)
		{
			if (instance.genericSpawner == null)
			{
				instance.genericSpawner = genericSpawner.Copy();
			}
			else
			{
				genericSpawner.CopyTo(instance.genericSpawner);
			}
		}
		else
		{
			instance.genericSpawner = null;
		}
		if (sleepingBag != null)
		{
			if (instance.sleepingBag == null)
			{
				instance.sleepingBag = sleepingBag.Copy();
			}
			else
			{
				sleepingBag.CopyTo(instance.sleepingBag);
			}
		}
		else
		{
			instance.sleepingBag = null;
		}
		if (lootableCorpse != null)
		{
			if (instance.lootableCorpse == null)
			{
				instance.lootableCorpse = lootableCorpse.Copy();
			}
			else
			{
				lootableCorpse.CopyTo(instance.lootableCorpse);
			}
		}
		else
		{
			instance.lootableCorpse = null;
		}
		if (sign != null)
		{
			if (instance.sign == null)
			{
				instance.sign = sign.Copy();
			}
			else
			{
				sign.CopyTo(instance.sign);
			}
		}
		else
		{
			instance.sign = null;
		}
		if (baseCombat != null)
		{
			if (instance.baseCombat == null)
			{
				instance.baseCombat = baseCombat.Copy();
			}
			else
			{
				baseCombat.CopyTo(instance.baseCombat);
			}
		}
		else
		{
			instance.baseCombat = null;
		}
		if (mapEntity != null)
		{
			if (instance.mapEntity == null)
			{
				instance.mapEntity = mapEntity.Copy();
			}
			else
			{
				mapEntity.CopyTo(instance.mapEntity);
			}
		}
		else
		{
			instance.mapEntity = null;
		}
		if (researchTable != null)
		{
			if (instance.researchTable == null)
			{
				instance.researchTable = researchTable.Copy();
			}
			else
			{
				researchTable.CopyTo(instance.researchTable);
			}
		}
		else
		{
			instance.researchTable = null;
		}
		if (dudExplosive != null)
		{
			if (instance.dudExplosive == null)
			{
				instance.dudExplosive = dudExplosive.Copy();
			}
			else
			{
				dudExplosive.CopyTo(instance.dudExplosive);
			}
		}
		else
		{
			instance.dudExplosive = null;
		}
		if (miningQuarry != null)
		{
			if (instance.miningQuarry == null)
			{
				instance.miningQuarry = miningQuarry.Copy();
			}
			else
			{
				miningQuarry.CopyTo(instance.miningQuarry);
			}
		}
		else
		{
			instance.miningQuarry = null;
		}
		if (helicopter != null)
		{
			if (instance.helicopter == null)
			{
				instance.helicopter = helicopter.Copy();
			}
			else
			{
				helicopter.CopyTo(instance.helicopter);
			}
		}
		else
		{
			instance.helicopter = null;
		}
		if (landmine != null)
		{
			if (instance.landmine == null)
			{
				instance.landmine = landmine.Copy();
			}
			else
			{
				landmine.CopyTo(instance.landmine);
			}
		}
		else
		{
			instance.landmine = null;
		}
		if (autoturret != null)
		{
			if (instance.autoturret == null)
			{
				instance.autoturret = autoturret.Copy();
			}
			else
			{
				autoturret.CopyTo(instance.autoturret);
			}
		}
		else
		{
			instance.autoturret = null;
		}
		if (sphereEntity != null)
		{
			if (instance.sphereEntity == null)
			{
				instance.sphereEntity = sphereEntity.Copy();
			}
			else
			{
				sphereEntity.CopyTo(instance.sphereEntity);
			}
		}
		else
		{
			instance.sphereEntity = null;
		}
		if (stabilityEntity != null)
		{
			if (instance.stabilityEntity == null)
			{
				instance.stabilityEntity = stabilityEntity.Copy();
			}
			else
			{
				stabilityEntity.CopyTo(instance.stabilityEntity);
			}
		}
		else
		{
			instance.stabilityEntity = null;
		}
		if (ownerInfo != null)
		{
			if (instance.ownerInfo == null)
			{
				instance.ownerInfo = ownerInfo.Copy();
			}
			else
			{
				ownerInfo.CopyTo(instance.ownerInfo);
			}
		}
		else
		{
			instance.ownerInfo = null;
		}
		if (decayEntity != null)
		{
			if (instance.decayEntity == null)
			{
				instance.decayEntity = decayEntity.Copy();
			}
			else
			{
				decayEntity.CopyTo(instance.decayEntity);
			}
		}
		else
		{
			instance.decayEntity = null;
		}
		if (spawnable != null)
		{
			if (instance.spawnable == null)
			{
				instance.spawnable = spawnable.Copy();
			}
			else
			{
				spawnable.CopyTo(instance.spawnable);
			}
		}
		else
		{
			instance.spawnable = null;
		}
		if (servergib != null)
		{
			if (instance.servergib == null)
			{
				instance.servergib = servergib.Copy();
			}
			else
			{
				servergib.CopyTo(instance.servergib);
			}
		}
		else
		{
			instance.servergib = null;
		}
		if (vendingMachine != null)
		{
			if (instance.vendingMachine == null)
			{
				instance.vendingMachine = vendingMachine.Copy();
			}
			else
			{
				vendingMachine.CopyTo(instance.vendingMachine);
			}
		}
		else
		{
			instance.vendingMachine = null;
		}
		if (spinnerWheel != null)
		{
			if (instance.spinnerWheel == null)
			{
				instance.spinnerWheel = spinnerWheel.Copy();
			}
			else
			{
				spinnerWheel.CopyTo(instance.spinnerWheel);
			}
		}
		else
		{
			instance.spinnerWheel = null;
		}
		if (lift != null)
		{
			if (instance.lift == null)
			{
				instance.lift = lift.Copy();
			}
			else
			{
				lift.CopyTo(instance.lift);
			}
		}
		else
		{
			instance.lift = null;
		}
		if (bradley != null)
		{
			if (instance.bradley == null)
			{
				instance.bradley = bradley.Copy();
			}
			else
			{
				bradley.CopyTo(instance.bradley);
			}
		}
		else
		{
			instance.bradley = null;
		}
		if (waterwell != null)
		{
			if (instance.waterwell == null)
			{
				instance.waterwell = waterwell.Copy();
			}
			else
			{
				waterwell.CopyTo(instance.waterwell);
			}
		}
		else
		{
			instance.waterwell = null;
		}
		if (motorBoat != null)
		{
			if (instance.motorBoat == null)
			{
				instance.motorBoat = motorBoat.Copy();
			}
			else
			{
				motorBoat.CopyTo(instance.motorBoat);
			}
		}
		else
		{
			instance.motorBoat = null;
		}
		if (ioEntity != null)
		{
			if (instance.ioEntity == null)
			{
				instance.ioEntity = ioEntity.Copy();
			}
			else
			{
				ioEntity.CopyTo(instance.ioEntity);
			}
		}
		else
		{
			instance.ioEntity = null;
		}
		if (puzzleReset != null)
		{
			if (instance.puzzleReset == null)
			{
				instance.puzzleReset = puzzleReset.Copy();
			}
			else
			{
				puzzleReset.CopyTo(instance.puzzleReset);
			}
		}
		else
		{
			instance.puzzleReset = null;
		}
		if (relationshipManager != null)
		{
			if (instance.relationshipManager == null)
			{
				instance.relationshipManager = relationshipManager.Copy();
			}
			else
			{
				relationshipManager.CopyTo(instance.relationshipManager);
			}
		}
		else
		{
			instance.relationshipManager = null;
		}
		if (hotAirBalloon != null)
		{
			if (instance.hotAirBalloon == null)
			{
				instance.hotAirBalloon = hotAirBalloon.Copy();
			}
			else
			{
				hotAirBalloon.CopyTo(instance.hotAirBalloon);
			}
		}
		else
		{
			instance.hotAirBalloon = null;
		}
		if (samSite != null)
		{
			if (instance.samSite == null)
			{
				instance.samSite = samSite.Copy();
			}
			else
			{
				samSite.CopyTo(instance.samSite);
			}
		}
		else
		{
			instance.samSite = null;
		}
		if (eggHunt != null)
		{
			if (instance.eggHunt == null)
			{
				instance.eggHunt = eggHunt.Copy();
			}
			else
			{
				eggHunt.CopyTo(instance.eggHunt);
			}
		}
		else
		{
			instance.eggHunt = null;
		}
		if (arcadeMachine != null)
		{
			if (instance.arcadeMachine == null)
			{
				instance.arcadeMachine = arcadeMachine.Copy();
			}
			else
			{
				arcadeMachine.CopyTo(instance.arcadeMachine);
			}
		}
		else
		{
			instance.arcadeMachine = null;
		}
		if (miniCopter != null)
		{
			if (instance.miniCopter == null)
			{
				instance.miniCopter = miniCopter.Copy();
			}
			else
			{
				miniCopter.CopyTo(instance.miniCopter);
			}
		}
		else
		{
			instance.miniCopter = null;
		}
		if (horse != null)
		{
			if (instance.horse == null)
			{
				instance.horse = horse.Copy();
			}
			else
			{
				horse.CopyTo(instance.horse);
			}
		}
		else
		{
			instance.horse = null;
		}
		if (smartAlarm != null)
		{
			if (instance.smartAlarm == null)
			{
				instance.smartAlarm = smartAlarm.Copy();
			}
			else
			{
				smartAlarm.CopyTo(instance.smartAlarm);
			}
		}
		else
		{
			instance.smartAlarm = null;
		}
		if (lightString != null)
		{
			if (instance.lightString == null)
			{
				instance.lightString = lightString.Copy();
			}
			else
			{
				lightString.CopyTo(instance.lightString);
			}
		}
		else
		{
			instance.lightString = null;
		}
		if (lightDeployer != null)
		{
			if (instance.lightDeployer == null)
			{
				instance.lightDeployer = lightDeployer.Copy();
			}
			else
			{
				lightDeployer.CopyTo(instance.lightDeployer);
			}
		}
		else
		{
			instance.lightDeployer = null;
		}
		if (rcEntity != null)
		{
			if (instance.rcEntity == null)
			{
				instance.rcEntity = rcEntity.Copy();
			}
			else
			{
				rcEntity.CopyTo(instance.rcEntity);
			}
		}
		else
		{
			instance.rcEntity = null;
		}
		if (computerStation != null)
		{
			if (instance.computerStation == null)
			{
				instance.computerStation = computerStation.Copy();
			}
			else
			{
				computerStation.CopyTo(instance.computerStation);
			}
		}
		else
		{
			instance.computerStation = null;
		}
		if (growableEntity != null)
		{
			if (instance.growableEntity == null)
			{
				instance.growableEntity = growableEntity.Copy();
			}
			else
			{
				growableEntity.CopyTo(instance.growableEntity);
			}
		}
		else
		{
			instance.growableEntity = null;
		}
		if (composter != null)
		{
			if (instance.composter == null)
			{
				instance.composter = composter.Copy();
			}
			else
			{
				composter.CopyTo(instance.composter);
			}
		}
		else
		{
			instance.composter = null;
		}
		if (modularVehicle != null)
		{
			if (instance.modularVehicle == null)
			{
				instance.modularVehicle = modularVehicle.Copy();
			}
			else
			{
				modularVehicle.CopyTo(instance.modularVehicle);
			}
		}
		else
		{
			instance.modularVehicle = null;
		}
		if (modularCar != null)
		{
			if (instance.modularCar == null)
			{
				instance.modularCar = modularCar.Copy();
			}
			else
			{
				modularCar.CopyTo(instance.modularCar);
			}
		}
		else
		{
			instance.modularCar = null;
		}
		if (simpleUID != null)
		{
			if (instance.simpleUID == null)
			{
				instance.simpleUID = simpleUID.Copy();
			}
			else
			{
				simpleUID.CopyTo(instance.simpleUID);
			}
		}
		else
		{
			instance.simpleUID = null;
		}
		if (vehicleLift != null)
		{
			if (instance.vehicleLift == null)
			{
				instance.vehicleLift = vehicleLift.Copy();
			}
			else
			{
				vehicleLift.CopyTo(instance.vehicleLift);
			}
		}
		else
		{
			instance.vehicleLift = null;
		}
		if (engineStorage != null)
		{
			if (instance.engineStorage == null)
			{
				instance.engineStorage = engineStorage.Copy();
			}
			else
			{
				engineStorage.CopyTo(instance.engineStorage);
			}
		}
		else
		{
			instance.engineStorage = null;
		}
		if (vehicleVendor != null)
		{
			if (instance.vehicleVendor == null)
			{
				instance.vehicleVendor = vehicleVendor.Copy();
			}
			else
			{
				vehicleVendor.CopyTo(instance.vehicleVendor);
			}
		}
		else
		{
			instance.vehicleVendor = null;
		}
		if (WaterPool != null)
		{
			if (instance.WaterPool == null)
			{
				instance.WaterPool = WaterPool.Copy();
			}
			else
			{
				WaterPool.CopyTo(instance.WaterPool);
			}
		}
		else
		{
			instance.WaterPool = null;
		}
		if (photo != null)
		{
			if (instance.photo == null)
			{
				instance.photo = photo.Copy();
			}
			else
			{
				photo.CopyTo(instance.photo);
			}
		}
		else
		{
			instance.photo = null;
		}
		if (photoFrame != null)
		{
			if (instance.photoFrame == null)
			{
				instance.photoFrame = photoFrame.Copy();
			}
			else
			{
				photoFrame.CopyTo(instance.photoFrame);
			}
		}
		else
		{
			instance.photoFrame = null;
		}
		if (vehicleModule != null)
		{
			if (instance.vehicleModule == null)
			{
				instance.vehicleModule = vehicleModule.Copy();
			}
			else
			{
				vehicleModule.CopyTo(instance.vehicleModule);
			}
		}
		else
		{
			instance.vehicleModule = null;
		}
		if (mixingTable != null)
		{
			if (instance.mixingTable == null)
			{
				instance.mixingTable = mixingTable.Copy();
			}
			else
			{
				mixingTable.CopyTo(instance.mixingTable);
			}
		}
		else
		{
			instance.mixingTable = null;
		}
		if (shopKeeper != null)
		{
			if (instance.shopKeeper == null)
			{
				instance.shopKeeper = shopKeeper.Copy();
			}
			else
			{
				shopKeeper.CopyTo(instance.shopKeeper);
			}
		}
		else
		{
			instance.shopKeeper = null;
		}
		if (elevator != null)
		{
			if (instance.elevator == null)
			{
				instance.elevator = elevator.Copy();
			}
			else
			{
				elevator.CopyTo(instance.elevator);
			}
		}
		else
		{
			instance.elevator = null;
		}
		if (skullTrophy != null)
		{
			if (instance.skullTrophy == null)
			{
				instance.skullTrophy = skullTrophy.Copy();
			}
			else
			{
				skullTrophy.CopyTo(instance.skullTrophy);
			}
		}
		else
		{
			instance.skullTrophy = null;
		}
		if (cassette != null)
		{
			if (instance.cassette == null)
			{
				instance.cassette = cassette.Copy();
			}
			else
			{
				cassette.CopyTo(instance.cassette);
			}
		}
		else
		{
			instance.cassette = null;
		}
		if (telephone != null)
		{
			if (instance.telephone == null)
			{
				instance.telephone = telephone.Copy();
			}
			else
			{
				telephone.CopyTo(instance.telephone);
			}
		}
		else
		{
			instance.telephone = null;
		}
		if (boomBox != null)
		{
			if (instance.boomBox == null)
			{
				instance.boomBox = boomBox.Copy();
			}
			else
			{
				boomBox.CopyTo(instance.boomBox);
			}
		}
		else
		{
			instance.boomBox = null;
		}
		instance.createdThisFrame = createdThisFrame;
	}

	public Entity Copy()
	{
		Entity entity = Pool.Get<Entity>();
		CopyTo(entity);
		return entity;
	}

	public static Entity Deserialize(Stream stream)
	{
		Entity entity = Pool.Get<Entity>();
		Deserialize(stream, entity, isDelta: false);
		return entity;
	}

	public static Entity DeserializeLengthDelimited(Stream stream)
	{
		Entity entity = Pool.Get<Entity>();
		DeserializeLengthDelimited(stream, entity, isDelta: false);
		return entity;
	}

	public static Entity DeserializeLength(Stream stream, int length)
	{
		Entity entity = Pool.Get<Entity>();
		DeserializeLength(stream, length, entity, isDelta: false);
		return entity;
	}

	public static Entity Deserialize(byte[] buffer)
	{
		Entity entity = Pool.Get<Entity>();
		using MemoryStream stream = new MemoryStream(buffer);
		Deserialize(stream, entity, isDelta: false);
		return entity;
	}

	public void FromProto(Stream stream, bool isDelta = false)
	{
		Deserialize(stream, this, isDelta);
	}

	public virtual void WriteToStream(Stream stream)
	{
		Serialize(stream, this);
	}

	public virtual void WriteToStreamDelta(Stream stream, Entity previous)
	{
		if (previous == null)
		{
			Serialize(stream, this);
		}
		else
		{
			SerializeDelta(stream, this, previous);
		}
	}

	public virtual void ReadFromStream(Stream stream, int size, bool isDelta = false)
	{
		DeserializeLength(stream, size, this, isDelta);
	}

	public static Entity Deserialize(byte[] buffer, Entity instance, bool isDelta = false)
	{
		using MemoryStream stream = new MemoryStream(buffer);
		Deserialize(stream, instance, isDelta);
		return instance;
	}

	public static Entity Deserialize(Stream stream, Entity instance, bool isDelta)
	{
		while (true)
		{
			int num = stream.ReadByte();
			switch (num)
			{
			case 10:
				if (instance.baseNetworkable == null)
				{
					instance.baseNetworkable = BaseNetworkable.DeserializeLengthDelimited(stream);
				}
				else
				{
					BaseNetworkable.DeserializeLengthDelimited(stream, instance.baseNetworkable, isDelta);
				}
				continue;
			case 18:
				if (instance.baseEntity == null)
				{
					instance.baseEntity = BaseEntity.DeserializeLengthDelimited(stream);
				}
				else
				{
					BaseEntity.DeserializeLengthDelimited(stream, instance.baseEntity, isDelta);
				}
				continue;
			case 26:
				if (instance.basePlayer == null)
				{
					instance.basePlayer = BasePlayer.DeserializeLengthDelimited(stream);
				}
				else
				{
					BasePlayer.DeserializeLengthDelimited(stream, instance.basePlayer, isDelta);
				}
				continue;
			case 34:
				if (instance.worldItem == null)
				{
					instance.worldItem = WorldItem.DeserializeLengthDelimited(stream);
				}
				else
				{
					WorldItem.DeserializeLengthDelimited(stream, instance.worldItem, isDelta);
				}
				continue;
			case 42:
				if (instance.resource == null)
				{
					instance.resource = BaseResource.DeserializeLengthDelimited(stream);
				}
				else
				{
					BaseResource.DeserializeLengthDelimited(stream, instance.resource, isDelta);
				}
				continue;
			case 50:
				if (instance.buildingBlock == null)
				{
					instance.buildingBlock = BuildingBlock.DeserializeLengthDelimited(stream);
				}
				else
				{
					BuildingBlock.DeserializeLengthDelimited(stream, instance.buildingBlock, isDelta);
				}
				continue;
			case 58:
				if (instance.environment == null)
				{
					instance.environment = ProtoBuf.Environment.DeserializeLengthDelimited(stream);
				}
				else
				{
					ProtoBuf.Environment.DeserializeLengthDelimited(stream, instance.environment, isDelta);
				}
				continue;
			case 66:
				if (instance.corpse == null)
				{
					instance.corpse = Corpse.DeserializeLengthDelimited(stream);
				}
				else
				{
					Corpse.DeserializeLengthDelimited(stream, instance.corpse, isDelta);
				}
				continue;
			case 82:
				if (instance.parent == null)
				{
					instance.parent = ParentInfo.DeserializeLengthDelimited(stream);
				}
				else
				{
					ParentInfo.DeserializeLengthDelimited(stream, instance.parent, isDelta);
				}
				continue;
			case 90:
				if (instance.keyLock == null)
				{
					instance.keyLock = KeyLock.DeserializeLengthDelimited(stream);
				}
				else
				{
					KeyLock.DeserializeLengthDelimited(stream, instance.keyLock, isDelta);
				}
				continue;
			case 98:
				if (instance.codeLock == null)
				{
					instance.codeLock = CodeLock.DeserializeLengthDelimited(stream);
				}
				else
				{
					CodeLock.DeserializeLengthDelimited(stream, instance.codeLock, isDelta);
				}
				continue;
			case 106:
				if (instance.entitySlots == null)
				{
					instance.entitySlots = EntitySlots.DeserializeLengthDelimited(stream);
				}
				else
				{
					EntitySlots.DeserializeLengthDelimited(stream, instance.entitySlots, isDelta);
				}
				continue;
			case 114:
				if (instance.buildingPrivilege == null)
				{
					instance.buildingPrivilege = BuildingPrivilege.DeserializeLengthDelimited(stream);
				}
				else
				{
					BuildingPrivilege.DeserializeLengthDelimited(stream, instance.buildingPrivilege, isDelta);
				}
				continue;
			case 122:
				if (instance.storageBox == null)
				{
					instance.storageBox = StorageBox.DeserializeLengthDelimited(stream);
				}
				else
				{
					StorageBox.DeserializeLengthDelimited(stream, instance.storageBox, isDelta);
				}
				continue;
			case -1:
				return instance;
			}
			Key key = ProtocolParser.ReadKey((byte)num, stream);
			switch (key.Field)
			{
			case 0u:
				throw new ProtocolBufferException("Invalid field id: 0, something went wrong in the stream");
			case 16u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.heldEntity == null)
					{
						instance.heldEntity = HeldEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						HeldEntity.DeserializeLengthDelimited(stream, instance.heldEntity, isDelta);
					}
				}
				break;
			case 17u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.baseProjectile == null)
					{
						instance.baseProjectile = BaseProjectile.DeserializeLengthDelimited(stream);
					}
					else
					{
						BaseProjectile.DeserializeLengthDelimited(stream, instance.baseProjectile, isDelta);
					}
				}
				break;
			case 18u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.baseNPC == null)
					{
						instance.baseNPC = BaseNPC.DeserializeLengthDelimited(stream);
					}
					else
					{
						BaseNPC.DeserializeLengthDelimited(stream, instance.baseNPC, isDelta);
					}
				}
				break;
			case 19u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.loot == null)
					{
						instance.loot = Loot.DeserializeLengthDelimited(stream);
					}
					else
					{
						Loot.DeserializeLengthDelimited(stream, instance.loot, isDelta);
					}
				}
				break;
			case 20u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.genericSpawner == null)
					{
						instance.genericSpawner = GenericSpawner.DeserializeLengthDelimited(stream);
					}
					else
					{
						GenericSpawner.DeserializeLengthDelimited(stream, instance.genericSpawner, isDelta);
					}
				}
				break;
			case 21u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.sleepingBag == null)
					{
						instance.sleepingBag = SleepingBag.DeserializeLengthDelimited(stream);
					}
					else
					{
						SleepingBag.DeserializeLengthDelimited(stream, instance.sleepingBag, isDelta);
					}
				}
				break;
			case 22u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.lootableCorpse == null)
					{
						instance.lootableCorpse = LootableCorpse.DeserializeLengthDelimited(stream);
					}
					else
					{
						LootableCorpse.DeserializeLengthDelimited(stream, instance.lootableCorpse, isDelta);
					}
				}
				break;
			case 23u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.sign == null)
					{
						instance.sign = Sign.DeserializeLengthDelimited(stream);
					}
					else
					{
						Sign.DeserializeLengthDelimited(stream, instance.sign, isDelta);
					}
				}
				break;
			case 24u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.baseCombat == null)
					{
						instance.baseCombat = BaseCombat.DeserializeLengthDelimited(stream);
					}
					else
					{
						BaseCombat.DeserializeLengthDelimited(stream, instance.baseCombat, isDelta);
					}
				}
				break;
			case 25u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.mapEntity == null)
					{
						instance.mapEntity = MapEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						MapEntity.DeserializeLengthDelimited(stream, instance.mapEntity, isDelta);
					}
				}
				break;
			case 26u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.researchTable == null)
					{
						instance.researchTable = ResearchTable.DeserializeLengthDelimited(stream);
					}
					else
					{
						ResearchTable.DeserializeLengthDelimited(stream, instance.researchTable, isDelta);
					}
				}
				break;
			case 27u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.dudExplosive == null)
					{
						instance.dudExplosive = DudExplosive.DeserializeLengthDelimited(stream);
					}
					else
					{
						DudExplosive.DeserializeLengthDelimited(stream, instance.dudExplosive, isDelta);
					}
				}
				break;
			case 28u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.miningQuarry == null)
					{
						instance.miningQuarry = MiningQuarry.DeserializeLengthDelimited(stream);
					}
					else
					{
						MiningQuarry.DeserializeLengthDelimited(stream, instance.miningQuarry, isDelta);
					}
				}
				break;
			case 30u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.helicopter == null)
					{
						instance.helicopter = Helicopter.DeserializeLengthDelimited(stream);
					}
					else
					{
						Helicopter.DeserializeLengthDelimited(stream, instance.helicopter, isDelta);
					}
				}
				break;
			case 31u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.landmine == null)
					{
						instance.landmine = Landmine.DeserializeLengthDelimited(stream);
					}
					else
					{
						Landmine.DeserializeLengthDelimited(stream, instance.landmine, isDelta);
					}
				}
				break;
			case 32u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.autoturret == null)
					{
						instance.autoturret = AutoTurret.DeserializeLengthDelimited(stream);
					}
					else
					{
						AutoTurret.DeserializeLengthDelimited(stream, instance.autoturret, isDelta);
					}
				}
				break;
			case 33u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.sphereEntity == null)
					{
						instance.sphereEntity = SphereEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						SphereEntity.DeserializeLengthDelimited(stream, instance.sphereEntity, isDelta);
					}
				}
				break;
			case 34u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.stabilityEntity == null)
					{
						instance.stabilityEntity = StabilityEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						StabilityEntity.DeserializeLengthDelimited(stream, instance.stabilityEntity, isDelta);
					}
				}
				break;
			case 35u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.ownerInfo == null)
					{
						instance.ownerInfo = OwnerInfo.DeserializeLengthDelimited(stream);
					}
					else
					{
						OwnerInfo.DeserializeLengthDelimited(stream, instance.ownerInfo, isDelta);
					}
				}
				break;
			case 36u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.decayEntity == null)
					{
						instance.decayEntity = DecayEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						DecayEntity.DeserializeLengthDelimited(stream, instance.decayEntity, isDelta);
					}
				}
				break;
			case 37u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.spawnable == null)
					{
						instance.spawnable = Spawnable.DeserializeLengthDelimited(stream);
					}
					else
					{
						Spawnable.DeserializeLengthDelimited(stream, instance.spawnable, isDelta);
					}
				}
				break;
			case 38u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.servergib == null)
					{
						instance.servergib = ServerGib.DeserializeLengthDelimited(stream);
					}
					else
					{
						ServerGib.DeserializeLengthDelimited(stream, instance.servergib, isDelta);
					}
				}
				break;
			case 39u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.vendingMachine == null)
					{
						instance.vendingMachine = VendingMachine.DeserializeLengthDelimited(stream);
					}
					else
					{
						VendingMachine.DeserializeLengthDelimited(stream, instance.vendingMachine, isDelta);
					}
				}
				break;
			case 40u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.spinnerWheel == null)
					{
						instance.spinnerWheel = SpinnerWheel.DeserializeLengthDelimited(stream);
					}
					else
					{
						SpinnerWheel.DeserializeLengthDelimited(stream, instance.spinnerWheel, isDelta);
					}
				}
				break;
			case 41u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.lift == null)
					{
						instance.lift = Lift.DeserializeLengthDelimited(stream);
					}
					else
					{
						Lift.DeserializeLengthDelimited(stream, instance.lift, isDelta);
					}
				}
				break;
			case 42u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.bradley == null)
					{
						instance.bradley = BradleyAPC.DeserializeLengthDelimited(stream);
					}
					else
					{
						BradleyAPC.DeserializeLengthDelimited(stream, instance.bradley, isDelta);
					}
				}
				break;
			case 43u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.waterwell == null)
					{
						instance.waterwell = WaterWell.DeserializeLengthDelimited(stream);
					}
					else
					{
						WaterWell.DeserializeLengthDelimited(stream, instance.waterwell, isDelta);
					}
				}
				break;
			case 44u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.motorBoat == null)
					{
						instance.motorBoat = Motorboat.DeserializeLengthDelimited(stream);
					}
					else
					{
						Motorboat.DeserializeLengthDelimited(stream, instance.motorBoat, isDelta);
					}
				}
				break;
			case 45u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.ioEntity == null)
					{
						instance.ioEntity = IOEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						IOEntity.DeserializeLengthDelimited(stream, instance.ioEntity, isDelta);
					}
				}
				break;
			case 46u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.puzzleReset == null)
					{
						instance.puzzleReset = PuzzleReset.DeserializeLengthDelimited(stream);
					}
					else
					{
						PuzzleReset.DeserializeLengthDelimited(stream, instance.puzzleReset, isDelta);
					}
				}
				break;
			case 47u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.relationshipManager == null)
					{
						instance.relationshipManager = RelationshipManager.DeserializeLengthDelimited(stream);
					}
					else
					{
						RelationshipManager.DeserializeLengthDelimited(stream, instance.relationshipManager, isDelta);
					}
				}
				break;
			case 48u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.hotAirBalloon == null)
					{
						instance.hotAirBalloon = HotAirBalloon.DeserializeLengthDelimited(stream);
					}
					else
					{
						HotAirBalloon.DeserializeLengthDelimited(stream, instance.hotAirBalloon, isDelta);
					}
				}
				break;
			case 49u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.samSite == null)
					{
						instance.samSite = SAMSite.DeserializeLengthDelimited(stream);
					}
					else
					{
						SAMSite.DeserializeLengthDelimited(stream, instance.samSite, isDelta);
					}
				}
				break;
			case 50u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.eggHunt == null)
					{
						instance.eggHunt = EggHunt.DeserializeLengthDelimited(stream);
					}
					else
					{
						EggHunt.DeserializeLengthDelimited(stream, instance.eggHunt, isDelta);
					}
				}
				break;
			case 51u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.arcadeMachine == null)
					{
						instance.arcadeMachine = ArcadeMachine.DeserializeLengthDelimited(stream);
					}
					else
					{
						ArcadeMachine.DeserializeLengthDelimited(stream, instance.arcadeMachine, isDelta);
					}
				}
				break;
			case 52u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.miniCopter == null)
					{
						instance.miniCopter = Minicopter.DeserializeLengthDelimited(stream);
					}
					else
					{
						Minicopter.DeserializeLengthDelimited(stream, instance.miniCopter, isDelta);
					}
				}
				break;
			case 53u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.horse == null)
					{
						instance.horse = Horse.DeserializeLengthDelimited(stream);
					}
					else
					{
						Horse.DeserializeLengthDelimited(stream, instance.horse, isDelta);
					}
				}
				break;
			case 54u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.smartAlarm == null)
					{
						instance.smartAlarm = SmartAlarm.DeserializeLengthDelimited(stream);
					}
					else
					{
						SmartAlarm.DeserializeLengthDelimited(stream, instance.smartAlarm, isDelta);
					}
				}
				break;
			case 55u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.lightString == null)
					{
						instance.lightString = LightString.DeserializeLengthDelimited(stream);
					}
					else
					{
						LightString.DeserializeLengthDelimited(stream, instance.lightString, isDelta);
					}
				}
				break;
			case 56u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.lightDeployer == null)
					{
						instance.lightDeployer = LightDeployer.DeserializeLengthDelimited(stream);
					}
					else
					{
						LightDeployer.DeserializeLengthDelimited(stream, instance.lightDeployer, isDelta);
					}
				}
				break;
			case 57u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.rcEntity == null)
					{
						instance.rcEntity = RCEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						RCEntity.DeserializeLengthDelimited(stream, instance.rcEntity, isDelta);
					}
				}
				break;
			case 58u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.computerStation == null)
					{
						instance.computerStation = ComputerStation.DeserializeLengthDelimited(stream);
					}
					else
					{
						ComputerStation.DeserializeLengthDelimited(stream, instance.computerStation, isDelta);
					}
				}
				break;
			case 59u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.growableEntity == null)
					{
						instance.growableEntity = GrowableEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						GrowableEntity.DeserializeLengthDelimited(stream, instance.growableEntity, isDelta);
					}
				}
				break;
			case 60u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.composter == null)
					{
						instance.composter = Composter.DeserializeLengthDelimited(stream);
					}
					else
					{
						Composter.DeserializeLengthDelimited(stream, instance.composter, isDelta);
					}
				}
				break;
			case 61u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.modularVehicle == null)
					{
						instance.modularVehicle = ModularVehicle.DeserializeLengthDelimited(stream);
					}
					else
					{
						ModularVehicle.DeserializeLengthDelimited(stream, instance.modularVehicle, isDelta);
					}
				}
				break;
			case 62u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.modularCar == null)
					{
						instance.modularCar = ModularCar.DeserializeLengthDelimited(stream);
					}
					else
					{
						ModularCar.DeserializeLengthDelimited(stream, instance.modularCar, isDelta);
					}
				}
				break;
			case 63u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.simpleUID == null)
					{
						instance.simpleUID = SimpleUID.DeserializeLengthDelimited(stream);
					}
					else
					{
						SimpleUID.DeserializeLengthDelimited(stream, instance.simpleUID, isDelta);
					}
				}
				break;
			case 64u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.vehicleLift == null)
					{
						instance.vehicleLift = VehicleLift.DeserializeLengthDelimited(stream);
					}
					else
					{
						VehicleLift.DeserializeLengthDelimited(stream, instance.vehicleLift, isDelta);
					}
				}
				break;
			case 65u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.engineStorage == null)
					{
						instance.engineStorage = EngineStorage.DeserializeLengthDelimited(stream);
					}
					else
					{
						EngineStorage.DeserializeLengthDelimited(stream, instance.engineStorage, isDelta);
					}
				}
				break;
			case 66u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.vehicleVendor == null)
					{
						instance.vehicleVendor = VehicleVendor.DeserializeLengthDelimited(stream);
					}
					else
					{
						VehicleVendor.DeserializeLengthDelimited(stream, instance.vehicleVendor, isDelta);
					}
				}
				break;
			case 67u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.WaterPool == null)
					{
						instance.WaterPool = WaterPool.DeserializeLengthDelimited(stream);
					}
					else
					{
						WaterPool.DeserializeLengthDelimited(stream, instance.WaterPool, isDelta);
					}
				}
				break;
			case 68u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.photo == null)
					{
						instance.photo = Photo.DeserializeLengthDelimited(stream);
					}
					else
					{
						Photo.DeserializeLengthDelimited(stream, instance.photo, isDelta);
					}
				}
				break;
			case 69u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.photoFrame == null)
					{
						instance.photoFrame = PhotoFrame.DeserializeLengthDelimited(stream);
					}
					else
					{
						PhotoFrame.DeserializeLengthDelimited(stream, instance.photoFrame, isDelta);
					}
				}
				break;
			case 70u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.vehicleModule == null)
					{
						instance.vehicleModule = VehicleModule.DeserializeLengthDelimited(stream);
					}
					else
					{
						VehicleModule.DeserializeLengthDelimited(stream, instance.vehicleModule, isDelta);
					}
				}
				break;
			case 71u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.mixingTable == null)
					{
						instance.mixingTable = MixingTable.DeserializeLengthDelimited(stream);
					}
					else
					{
						MixingTable.DeserializeLengthDelimited(stream, instance.mixingTable, isDelta);
					}
				}
				break;
			case 72u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.shopKeeper == null)
					{
						instance.shopKeeper = ShopKeeper.DeserializeLengthDelimited(stream);
					}
					else
					{
						ShopKeeper.DeserializeLengthDelimited(stream, instance.shopKeeper, isDelta);
					}
				}
				break;
			case 73u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.elevator == null)
					{
						instance.elevator = Elevator.DeserializeLengthDelimited(stream);
					}
					else
					{
						Elevator.DeserializeLengthDelimited(stream, instance.elevator, isDelta);
					}
				}
				break;
			case 74u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.skullTrophy == null)
					{
						instance.skullTrophy = SkullTrophy.DeserializeLengthDelimited(stream);
					}
					else
					{
						SkullTrophy.DeserializeLengthDelimited(stream, instance.skullTrophy, isDelta);
					}
				}
				break;
			case 75u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.cassette == null)
					{
						instance.cassette = Cassette.DeserializeLengthDelimited(stream);
					}
					else
					{
						Cassette.DeserializeLengthDelimited(stream, instance.cassette, isDelta);
					}
				}
				break;
			case 76u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.telephone == null)
					{
						instance.telephone = Telephone.DeserializeLengthDelimited(stream);
					}
					else
					{
						Telephone.DeserializeLengthDelimited(stream, instance.telephone, isDelta);
					}
				}
				break;
			case 77u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.boomBox == null)
					{
						instance.boomBox = BoomBox.DeserializeLengthDelimited(stream);
					}
					else
					{
						BoomBox.DeserializeLengthDelimited(stream, instance.boomBox, isDelta);
					}
				}
				break;
			case 100u:
				if (key.WireType == Wire.Varint)
				{
					instance.createdThisFrame = ProtocolParser.ReadBool(stream);
				}
				break;
			default:
				ProtocolParser.SkipKey(stream, key);
				break;
			}
		}
	}

	public static Entity DeserializeLengthDelimited(Stream stream, Entity instance, bool isDelta)
	{
		long num = ProtocolParser.ReadUInt32(stream);
		num += stream.Position;
		while (stream.Position < num)
		{
			int num2 = stream.ReadByte();
			switch (num2)
			{
			case -1:
				throw new EndOfStreamException();
			case 10:
				if (instance.baseNetworkable == null)
				{
					instance.baseNetworkable = BaseNetworkable.DeserializeLengthDelimited(stream);
				}
				else
				{
					BaseNetworkable.DeserializeLengthDelimited(stream, instance.baseNetworkable, isDelta);
				}
				continue;
			case 18:
				if (instance.baseEntity == null)
				{
					instance.baseEntity = BaseEntity.DeserializeLengthDelimited(stream);
				}
				else
				{
					BaseEntity.DeserializeLengthDelimited(stream, instance.baseEntity, isDelta);
				}
				continue;
			case 26:
				if (instance.basePlayer == null)
				{
					instance.basePlayer = BasePlayer.DeserializeLengthDelimited(stream);
				}
				else
				{
					BasePlayer.DeserializeLengthDelimited(stream, instance.basePlayer, isDelta);
				}
				continue;
			case 34:
				if (instance.worldItem == null)
				{
					instance.worldItem = WorldItem.DeserializeLengthDelimited(stream);
				}
				else
				{
					WorldItem.DeserializeLengthDelimited(stream, instance.worldItem, isDelta);
				}
				continue;
			case 42:
				if (instance.resource == null)
				{
					instance.resource = BaseResource.DeserializeLengthDelimited(stream);
				}
				else
				{
					BaseResource.DeserializeLengthDelimited(stream, instance.resource, isDelta);
				}
				continue;
			case 50:
				if (instance.buildingBlock == null)
				{
					instance.buildingBlock = BuildingBlock.DeserializeLengthDelimited(stream);
				}
				else
				{
					BuildingBlock.DeserializeLengthDelimited(stream, instance.buildingBlock, isDelta);
				}
				continue;
			case 58:
				if (instance.environment == null)
				{
					instance.environment = ProtoBuf.Environment.DeserializeLengthDelimited(stream);
				}
				else
				{
					ProtoBuf.Environment.DeserializeLengthDelimited(stream, instance.environment, isDelta);
				}
				continue;
			case 66:
				if (instance.corpse == null)
				{
					instance.corpse = Corpse.DeserializeLengthDelimited(stream);
				}
				else
				{
					Corpse.DeserializeLengthDelimited(stream, instance.corpse, isDelta);
				}
				continue;
			case 82:
				if (instance.parent == null)
				{
					instance.parent = ParentInfo.DeserializeLengthDelimited(stream);
				}
				else
				{
					ParentInfo.DeserializeLengthDelimited(stream, instance.parent, isDelta);
				}
				continue;
			case 90:
				if (instance.keyLock == null)
				{
					instance.keyLock = KeyLock.DeserializeLengthDelimited(stream);
				}
				else
				{
					KeyLock.DeserializeLengthDelimited(stream, instance.keyLock, isDelta);
				}
				continue;
			case 98:
				if (instance.codeLock == null)
				{
					instance.codeLock = CodeLock.DeserializeLengthDelimited(stream);
				}
				else
				{
					CodeLock.DeserializeLengthDelimited(stream, instance.codeLock, isDelta);
				}
				continue;
			case 106:
				if (instance.entitySlots == null)
				{
					instance.entitySlots = EntitySlots.DeserializeLengthDelimited(stream);
				}
				else
				{
					EntitySlots.DeserializeLengthDelimited(stream, instance.entitySlots, isDelta);
				}
				continue;
			case 114:
				if (instance.buildingPrivilege == null)
				{
					instance.buildingPrivilege = BuildingPrivilege.DeserializeLengthDelimited(stream);
				}
				else
				{
					BuildingPrivilege.DeserializeLengthDelimited(stream, instance.buildingPrivilege, isDelta);
				}
				continue;
			case 122:
				if (instance.storageBox == null)
				{
					instance.storageBox = StorageBox.DeserializeLengthDelimited(stream);
				}
				else
				{
					StorageBox.DeserializeLengthDelimited(stream, instance.storageBox, isDelta);
				}
				continue;
			}
			Key key = ProtocolParser.ReadKey((byte)num2, stream);
			switch (key.Field)
			{
			case 0u:
				throw new ProtocolBufferException("Invalid field id: 0, something went wrong in the stream");
			case 16u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.heldEntity == null)
					{
						instance.heldEntity = HeldEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						HeldEntity.DeserializeLengthDelimited(stream, instance.heldEntity, isDelta);
					}
				}
				break;
			case 17u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.baseProjectile == null)
					{
						instance.baseProjectile = BaseProjectile.DeserializeLengthDelimited(stream);
					}
					else
					{
						BaseProjectile.DeserializeLengthDelimited(stream, instance.baseProjectile, isDelta);
					}
				}
				break;
			case 18u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.baseNPC == null)
					{
						instance.baseNPC = BaseNPC.DeserializeLengthDelimited(stream);
					}
					else
					{
						BaseNPC.DeserializeLengthDelimited(stream, instance.baseNPC, isDelta);
					}
				}
				break;
			case 19u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.loot == null)
					{
						instance.loot = Loot.DeserializeLengthDelimited(stream);
					}
					else
					{
						Loot.DeserializeLengthDelimited(stream, instance.loot, isDelta);
					}
				}
				break;
			case 20u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.genericSpawner == null)
					{
						instance.genericSpawner = GenericSpawner.DeserializeLengthDelimited(stream);
					}
					else
					{
						GenericSpawner.DeserializeLengthDelimited(stream, instance.genericSpawner, isDelta);
					}
				}
				break;
			case 21u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.sleepingBag == null)
					{
						instance.sleepingBag = SleepingBag.DeserializeLengthDelimited(stream);
					}
					else
					{
						SleepingBag.DeserializeLengthDelimited(stream, instance.sleepingBag, isDelta);
					}
				}
				break;
			case 22u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.lootableCorpse == null)
					{
						instance.lootableCorpse = LootableCorpse.DeserializeLengthDelimited(stream);
					}
					else
					{
						LootableCorpse.DeserializeLengthDelimited(stream, instance.lootableCorpse, isDelta);
					}
				}
				break;
			case 23u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.sign == null)
					{
						instance.sign = Sign.DeserializeLengthDelimited(stream);
					}
					else
					{
						Sign.DeserializeLengthDelimited(stream, instance.sign, isDelta);
					}
				}
				break;
			case 24u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.baseCombat == null)
					{
						instance.baseCombat = BaseCombat.DeserializeLengthDelimited(stream);
					}
					else
					{
						BaseCombat.DeserializeLengthDelimited(stream, instance.baseCombat, isDelta);
					}
				}
				break;
			case 25u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.mapEntity == null)
					{
						instance.mapEntity = MapEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						MapEntity.DeserializeLengthDelimited(stream, instance.mapEntity, isDelta);
					}
				}
				break;
			case 26u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.researchTable == null)
					{
						instance.researchTable = ResearchTable.DeserializeLengthDelimited(stream);
					}
					else
					{
						ResearchTable.DeserializeLengthDelimited(stream, instance.researchTable, isDelta);
					}
				}
				break;
			case 27u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.dudExplosive == null)
					{
						instance.dudExplosive = DudExplosive.DeserializeLengthDelimited(stream);
					}
					else
					{
						DudExplosive.DeserializeLengthDelimited(stream, instance.dudExplosive, isDelta);
					}
				}
				break;
			case 28u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.miningQuarry == null)
					{
						instance.miningQuarry = MiningQuarry.DeserializeLengthDelimited(stream);
					}
					else
					{
						MiningQuarry.DeserializeLengthDelimited(stream, instance.miningQuarry, isDelta);
					}
				}
				break;
			case 30u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.helicopter == null)
					{
						instance.helicopter = Helicopter.DeserializeLengthDelimited(stream);
					}
					else
					{
						Helicopter.DeserializeLengthDelimited(stream, instance.helicopter, isDelta);
					}
				}
				break;
			case 31u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.landmine == null)
					{
						instance.landmine = Landmine.DeserializeLengthDelimited(stream);
					}
					else
					{
						Landmine.DeserializeLengthDelimited(stream, instance.landmine, isDelta);
					}
				}
				break;
			case 32u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.autoturret == null)
					{
						instance.autoturret = AutoTurret.DeserializeLengthDelimited(stream);
					}
					else
					{
						AutoTurret.DeserializeLengthDelimited(stream, instance.autoturret, isDelta);
					}
				}
				break;
			case 33u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.sphereEntity == null)
					{
						instance.sphereEntity = SphereEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						SphereEntity.DeserializeLengthDelimited(stream, instance.sphereEntity, isDelta);
					}
				}
				break;
			case 34u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.stabilityEntity == null)
					{
						instance.stabilityEntity = StabilityEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						StabilityEntity.DeserializeLengthDelimited(stream, instance.stabilityEntity, isDelta);
					}
				}
				break;
			case 35u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.ownerInfo == null)
					{
						instance.ownerInfo = OwnerInfo.DeserializeLengthDelimited(stream);
					}
					else
					{
						OwnerInfo.DeserializeLengthDelimited(stream, instance.ownerInfo, isDelta);
					}
				}
				break;
			case 36u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.decayEntity == null)
					{
						instance.decayEntity = DecayEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						DecayEntity.DeserializeLengthDelimited(stream, instance.decayEntity, isDelta);
					}
				}
				break;
			case 37u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.spawnable == null)
					{
						instance.spawnable = Spawnable.DeserializeLengthDelimited(stream);
					}
					else
					{
						Spawnable.DeserializeLengthDelimited(stream, instance.spawnable, isDelta);
					}
				}
				break;
			case 38u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.servergib == null)
					{
						instance.servergib = ServerGib.DeserializeLengthDelimited(stream);
					}
					else
					{
						ServerGib.DeserializeLengthDelimited(stream, instance.servergib, isDelta);
					}
				}
				break;
			case 39u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.vendingMachine == null)
					{
						instance.vendingMachine = VendingMachine.DeserializeLengthDelimited(stream);
					}
					else
					{
						VendingMachine.DeserializeLengthDelimited(stream, instance.vendingMachine, isDelta);
					}
				}
				break;
			case 40u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.spinnerWheel == null)
					{
						instance.spinnerWheel = SpinnerWheel.DeserializeLengthDelimited(stream);
					}
					else
					{
						SpinnerWheel.DeserializeLengthDelimited(stream, instance.spinnerWheel, isDelta);
					}
				}
				break;
			case 41u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.lift == null)
					{
						instance.lift = Lift.DeserializeLengthDelimited(stream);
					}
					else
					{
						Lift.DeserializeLengthDelimited(stream, instance.lift, isDelta);
					}
				}
				break;
			case 42u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.bradley == null)
					{
						instance.bradley = BradleyAPC.DeserializeLengthDelimited(stream);
					}
					else
					{
						BradleyAPC.DeserializeLengthDelimited(stream, instance.bradley, isDelta);
					}
				}
				break;
			case 43u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.waterwell == null)
					{
						instance.waterwell = WaterWell.DeserializeLengthDelimited(stream);
					}
					else
					{
						WaterWell.DeserializeLengthDelimited(stream, instance.waterwell, isDelta);
					}
				}
				break;
			case 44u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.motorBoat == null)
					{
						instance.motorBoat = Motorboat.DeserializeLengthDelimited(stream);
					}
					else
					{
						Motorboat.DeserializeLengthDelimited(stream, instance.motorBoat, isDelta);
					}
				}
				break;
			case 45u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.ioEntity == null)
					{
						instance.ioEntity = IOEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						IOEntity.DeserializeLengthDelimited(stream, instance.ioEntity, isDelta);
					}
				}
				break;
			case 46u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.puzzleReset == null)
					{
						instance.puzzleReset = PuzzleReset.DeserializeLengthDelimited(stream);
					}
					else
					{
						PuzzleReset.DeserializeLengthDelimited(stream, instance.puzzleReset, isDelta);
					}
				}
				break;
			case 47u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.relationshipManager == null)
					{
						instance.relationshipManager = RelationshipManager.DeserializeLengthDelimited(stream);
					}
					else
					{
						RelationshipManager.DeserializeLengthDelimited(stream, instance.relationshipManager, isDelta);
					}
				}
				break;
			case 48u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.hotAirBalloon == null)
					{
						instance.hotAirBalloon = HotAirBalloon.DeserializeLengthDelimited(stream);
					}
					else
					{
						HotAirBalloon.DeserializeLengthDelimited(stream, instance.hotAirBalloon, isDelta);
					}
				}
				break;
			case 49u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.samSite == null)
					{
						instance.samSite = SAMSite.DeserializeLengthDelimited(stream);
					}
					else
					{
						SAMSite.DeserializeLengthDelimited(stream, instance.samSite, isDelta);
					}
				}
				break;
			case 50u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.eggHunt == null)
					{
						instance.eggHunt = EggHunt.DeserializeLengthDelimited(stream);
					}
					else
					{
						EggHunt.DeserializeLengthDelimited(stream, instance.eggHunt, isDelta);
					}
				}
				break;
			case 51u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.arcadeMachine == null)
					{
						instance.arcadeMachine = ArcadeMachine.DeserializeLengthDelimited(stream);
					}
					else
					{
						ArcadeMachine.DeserializeLengthDelimited(stream, instance.arcadeMachine, isDelta);
					}
				}
				break;
			case 52u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.miniCopter == null)
					{
						instance.miniCopter = Minicopter.DeserializeLengthDelimited(stream);
					}
					else
					{
						Minicopter.DeserializeLengthDelimited(stream, instance.miniCopter, isDelta);
					}
				}
				break;
			case 53u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.horse == null)
					{
						instance.horse = Horse.DeserializeLengthDelimited(stream);
					}
					else
					{
						Horse.DeserializeLengthDelimited(stream, instance.horse, isDelta);
					}
				}
				break;
			case 54u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.smartAlarm == null)
					{
						instance.smartAlarm = SmartAlarm.DeserializeLengthDelimited(stream);
					}
					else
					{
						SmartAlarm.DeserializeLengthDelimited(stream, instance.smartAlarm, isDelta);
					}
				}
				break;
			case 55u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.lightString == null)
					{
						instance.lightString = LightString.DeserializeLengthDelimited(stream);
					}
					else
					{
						LightString.DeserializeLengthDelimited(stream, instance.lightString, isDelta);
					}
				}
				break;
			case 56u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.lightDeployer == null)
					{
						instance.lightDeployer = LightDeployer.DeserializeLengthDelimited(stream);
					}
					else
					{
						LightDeployer.DeserializeLengthDelimited(stream, instance.lightDeployer, isDelta);
					}
				}
				break;
			case 57u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.rcEntity == null)
					{
						instance.rcEntity = RCEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						RCEntity.DeserializeLengthDelimited(stream, instance.rcEntity, isDelta);
					}
				}
				break;
			case 58u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.computerStation == null)
					{
						instance.computerStation = ComputerStation.DeserializeLengthDelimited(stream);
					}
					else
					{
						ComputerStation.DeserializeLengthDelimited(stream, instance.computerStation, isDelta);
					}
				}
				break;
			case 59u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.growableEntity == null)
					{
						instance.growableEntity = GrowableEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						GrowableEntity.DeserializeLengthDelimited(stream, instance.growableEntity, isDelta);
					}
				}
				break;
			case 60u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.composter == null)
					{
						instance.composter = Composter.DeserializeLengthDelimited(stream);
					}
					else
					{
						Composter.DeserializeLengthDelimited(stream, instance.composter, isDelta);
					}
				}
				break;
			case 61u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.modularVehicle == null)
					{
						instance.modularVehicle = ModularVehicle.DeserializeLengthDelimited(stream);
					}
					else
					{
						ModularVehicle.DeserializeLengthDelimited(stream, instance.modularVehicle, isDelta);
					}
				}
				break;
			case 62u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.modularCar == null)
					{
						instance.modularCar = ModularCar.DeserializeLengthDelimited(stream);
					}
					else
					{
						ModularCar.DeserializeLengthDelimited(stream, instance.modularCar, isDelta);
					}
				}
				break;
			case 63u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.simpleUID == null)
					{
						instance.simpleUID = SimpleUID.DeserializeLengthDelimited(stream);
					}
					else
					{
						SimpleUID.DeserializeLengthDelimited(stream, instance.simpleUID, isDelta);
					}
				}
				break;
			case 64u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.vehicleLift == null)
					{
						instance.vehicleLift = VehicleLift.DeserializeLengthDelimited(stream);
					}
					else
					{
						VehicleLift.DeserializeLengthDelimited(stream, instance.vehicleLift, isDelta);
					}
				}
				break;
			case 65u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.engineStorage == null)
					{
						instance.engineStorage = EngineStorage.DeserializeLengthDelimited(stream);
					}
					else
					{
						EngineStorage.DeserializeLengthDelimited(stream, instance.engineStorage, isDelta);
					}
				}
				break;
			case 66u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.vehicleVendor == null)
					{
						instance.vehicleVendor = VehicleVendor.DeserializeLengthDelimited(stream);
					}
					else
					{
						VehicleVendor.DeserializeLengthDelimited(stream, instance.vehicleVendor, isDelta);
					}
				}
				break;
			case 67u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.WaterPool == null)
					{
						instance.WaterPool = WaterPool.DeserializeLengthDelimited(stream);
					}
					else
					{
						WaterPool.DeserializeLengthDelimited(stream, instance.WaterPool, isDelta);
					}
				}
				break;
			case 68u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.photo == null)
					{
						instance.photo = Photo.DeserializeLengthDelimited(stream);
					}
					else
					{
						Photo.DeserializeLengthDelimited(stream, instance.photo, isDelta);
					}
				}
				break;
			case 69u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.photoFrame == null)
					{
						instance.photoFrame = PhotoFrame.DeserializeLengthDelimited(stream);
					}
					else
					{
						PhotoFrame.DeserializeLengthDelimited(stream, instance.photoFrame, isDelta);
					}
				}
				break;
			case 70u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.vehicleModule == null)
					{
						instance.vehicleModule = VehicleModule.DeserializeLengthDelimited(stream);
					}
					else
					{
						VehicleModule.DeserializeLengthDelimited(stream, instance.vehicleModule, isDelta);
					}
				}
				break;
			case 71u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.mixingTable == null)
					{
						instance.mixingTable = MixingTable.DeserializeLengthDelimited(stream);
					}
					else
					{
						MixingTable.DeserializeLengthDelimited(stream, instance.mixingTable, isDelta);
					}
				}
				break;
			case 72u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.shopKeeper == null)
					{
						instance.shopKeeper = ShopKeeper.DeserializeLengthDelimited(stream);
					}
					else
					{
						ShopKeeper.DeserializeLengthDelimited(stream, instance.shopKeeper, isDelta);
					}
				}
				break;
			case 73u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.elevator == null)
					{
						instance.elevator = Elevator.DeserializeLengthDelimited(stream);
					}
					else
					{
						Elevator.DeserializeLengthDelimited(stream, instance.elevator, isDelta);
					}
				}
				break;
			case 74u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.skullTrophy == null)
					{
						instance.skullTrophy = SkullTrophy.DeserializeLengthDelimited(stream);
					}
					else
					{
						SkullTrophy.DeserializeLengthDelimited(stream, instance.skullTrophy, isDelta);
					}
				}
				break;
			case 75u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.cassette == null)
					{
						instance.cassette = Cassette.DeserializeLengthDelimited(stream);
					}
					else
					{
						Cassette.DeserializeLengthDelimited(stream, instance.cassette, isDelta);
					}
				}
				break;
			case 76u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.telephone == null)
					{
						instance.telephone = Telephone.DeserializeLengthDelimited(stream);
					}
					else
					{
						Telephone.DeserializeLengthDelimited(stream, instance.telephone, isDelta);
					}
				}
				break;
			case 77u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.boomBox == null)
					{
						instance.boomBox = BoomBox.DeserializeLengthDelimited(stream);
					}
					else
					{
						BoomBox.DeserializeLengthDelimited(stream, instance.boomBox, isDelta);
					}
				}
				break;
			case 100u:
				if (key.WireType == Wire.Varint)
				{
					instance.createdThisFrame = ProtocolParser.ReadBool(stream);
				}
				break;
			default:
				ProtocolParser.SkipKey(stream, key);
				break;
			}
		}
		if (stream.Position != num)
		{
			throw new ProtocolBufferException("Read past max limit");
		}
		return instance;
	}

	public static Entity DeserializeLength(Stream stream, int length, Entity instance, bool isDelta)
	{
		long num = stream.Position + length;
		while (stream.Position < num)
		{
			int num2 = stream.ReadByte();
			switch (num2)
			{
			case -1:
				throw new EndOfStreamException();
			case 10:
				if (instance.baseNetworkable == null)
				{
					instance.baseNetworkable = BaseNetworkable.DeserializeLengthDelimited(stream);
				}
				else
				{
					BaseNetworkable.DeserializeLengthDelimited(stream, instance.baseNetworkable, isDelta);
				}
				continue;
			case 18:
				if (instance.baseEntity == null)
				{
					instance.baseEntity = BaseEntity.DeserializeLengthDelimited(stream);
				}
				else
				{
					BaseEntity.DeserializeLengthDelimited(stream, instance.baseEntity, isDelta);
				}
				continue;
			case 26:
				if (instance.basePlayer == null)
				{
					instance.basePlayer = BasePlayer.DeserializeLengthDelimited(stream);
				}
				else
				{
					BasePlayer.DeserializeLengthDelimited(stream, instance.basePlayer, isDelta);
				}
				continue;
			case 34:
				if (instance.worldItem == null)
				{
					instance.worldItem = WorldItem.DeserializeLengthDelimited(stream);
				}
				else
				{
					WorldItem.DeserializeLengthDelimited(stream, instance.worldItem, isDelta);
				}
				continue;
			case 42:
				if (instance.resource == null)
				{
					instance.resource = BaseResource.DeserializeLengthDelimited(stream);
				}
				else
				{
					BaseResource.DeserializeLengthDelimited(stream, instance.resource, isDelta);
				}
				continue;
			case 50:
				if (instance.buildingBlock == null)
				{
					instance.buildingBlock = BuildingBlock.DeserializeLengthDelimited(stream);
				}
				else
				{
					BuildingBlock.DeserializeLengthDelimited(stream, instance.buildingBlock, isDelta);
				}
				continue;
			case 58:
				if (instance.environment == null)
				{
					instance.environment = ProtoBuf.Environment.DeserializeLengthDelimited(stream);
				}
				else
				{
					ProtoBuf.Environment.DeserializeLengthDelimited(stream, instance.environment, isDelta);
				}
				continue;
			case 66:
				if (instance.corpse == null)
				{
					instance.corpse = Corpse.DeserializeLengthDelimited(stream);
				}
				else
				{
					Corpse.DeserializeLengthDelimited(stream, instance.corpse, isDelta);
				}
				continue;
			case 82:
				if (instance.parent == null)
				{
					instance.parent = ParentInfo.DeserializeLengthDelimited(stream);
				}
				else
				{
					ParentInfo.DeserializeLengthDelimited(stream, instance.parent, isDelta);
				}
				continue;
			case 90:
				if (instance.keyLock == null)
				{
					instance.keyLock = KeyLock.DeserializeLengthDelimited(stream);
				}
				else
				{
					KeyLock.DeserializeLengthDelimited(stream, instance.keyLock, isDelta);
				}
				continue;
			case 98:
				if (instance.codeLock == null)
				{
					instance.codeLock = CodeLock.DeserializeLengthDelimited(stream);
				}
				else
				{
					CodeLock.DeserializeLengthDelimited(stream, instance.codeLock, isDelta);
				}
				continue;
			case 106:
				if (instance.entitySlots == null)
				{
					instance.entitySlots = EntitySlots.DeserializeLengthDelimited(stream);
				}
				else
				{
					EntitySlots.DeserializeLengthDelimited(stream, instance.entitySlots, isDelta);
				}
				continue;
			case 114:
				if (instance.buildingPrivilege == null)
				{
					instance.buildingPrivilege = BuildingPrivilege.DeserializeLengthDelimited(stream);
				}
				else
				{
					BuildingPrivilege.DeserializeLengthDelimited(stream, instance.buildingPrivilege, isDelta);
				}
				continue;
			case 122:
				if (instance.storageBox == null)
				{
					instance.storageBox = StorageBox.DeserializeLengthDelimited(stream);
				}
				else
				{
					StorageBox.DeserializeLengthDelimited(stream, instance.storageBox, isDelta);
				}
				continue;
			}
			Key key = ProtocolParser.ReadKey((byte)num2, stream);
			switch (key.Field)
			{
			case 0u:
				throw new ProtocolBufferException("Invalid field id: 0, something went wrong in the stream");
			case 16u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.heldEntity == null)
					{
						instance.heldEntity = HeldEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						HeldEntity.DeserializeLengthDelimited(stream, instance.heldEntity, isDelta);
					}
				}
				break;
			case 17u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.baseProjectile == null)
					{
						instance.baseProjectile = BaseProjectile.DeserializeLengthDelimited(stream);
					}
					else
					{
						BaseProjectile.DeserializeLengthDelimited(stream, instance.baseProjectile, isDelta);
					}
				}
				break;
			case 18u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.baseNPC == null)
					{
						instance.baseNPC = BaseNPC.DeserializeLengthDelimited(stream);
					}
					else
					{
						BaseNPC.DeserializeLengthDelimited(stream, instance.baseNPC, isDelta);
					}
				}
				break;
			case 19u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.loot == null)
					{
						instance.loot = Loot.DeserializeLengthDelimited(stream);
					}
					else
					{
						Loot.DeserializeLengthDelimited(stream, instance.loot, isDelta);
					}
				}
				break;
			case 20u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.genericSpawner == null)
					{
						instance.genericSpawner = GenericSpawner.DeserializeLengthDelimited(stream);
					}
					else
					{
						GenericSpawner.DeserializeLengthDelimited(stream, instance.genericSpawner, isDelta);
					}
				}
				break;
			case 21u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.sleepingBag == null)
					{
						instance.sleepingBag = SleepingBag.DeserializeLengthDelimited(stream);
					}
					else
					{
						SleepingBag.DeserializeLengthDelimited(stream, instance.sleepingBag, isDelta);
					}
				}
				break;
			case 22u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.lootableCorpse == null)
					{
						instance.lootableCorpse = LootableCorpse.DeserializeLengthDelimited(stream);
					}
					else
					{
						LootableCorpse.DeserializeLengthDelimited(stream, instance.lootableCorpse, isDelta);
					}
				}
				break;
			case 23u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.sign == null)
					{
						instance.sign = Sign.DeserializeLengthDelimited(stream);
					}
					else
					{
						Sign.DeserializeLengthDelimited(stream, instance.sign, isDelta);
					}
				}
				break;
			case 24u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.baseCombat == null)
					{
						instance.baseCombat = BaseCombat.DeserializeLengthDelimited(stream);
					}
					else
					{
						BaseCombat.DeserializeLengthDelimited(stream, instance.baseCombat, isDelta);
					}
				}
				break;
			case 25u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.mapEntity == null)
					{
						instance.mapEntity = MapEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						MapEntity.DeserializeLengthDelimited(stream, instance.mapEntity, isDelta);
					}
				}
				break;
			case 26u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.researchTable == null)
					{
						instance.researchTable = ResearchTable.DeserializeLengthDelimited(stream);
					}
					else
					{
						ResearchTable.DeserializeLengthDelimited(stream, instance.researchTable, isDelta);
					}
				}
				break;
			case 27u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.dudExplosive == null)
					{
						instance.dudExplosive = DudExplosive.DeserializeLengthDelimited(stream);
					}
					else
					{
						DudExplosive.DeserializeLengthDelimited(stream, instance.dudExplosive, isDelta);
					}
				}
				break;
			case 28u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.miningQuarry == null)
					{
						instance.miningQuarry = MiningQuarry.DeserializeLengthDelimited(stream);
					}
					else
					{
						MiningQuarry.DeserializeLengthDelimited(stream, instance.miningQuarry, isDelta);
					}
				}
				break;
			case 30u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.helicopter == null)
					{
						instance.helicopter = Helicopter.DeserializeLengthDelimited(stream);
					}
					else
					{
						Helicopter.DeserializeLengthDelimited(stream, instance.helicopter, isDelta);
					}
				}
				break;
			case 31u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.landmine == null)
					{
						instance.landmine = Landmine.DeserializeLengthDelimited(stream);
					}
					else
					{
						Landmine.DeserializeLengthDelimited(stream, instance.landmine, isDelta);
					}
				}
				break;
			case 32u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.autoturret == null)
					{
						instance.autoturret = AutoTurret.DeserializeLengthDelimited(stream);
					}
					else
					{
						AutoTurret.DeserializeLengthDelimited(stream, instance.autoturret, isDelta);
					}
				}
				break;
			case 33u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.sphereEntity == null)
					{
						instance.sphereEntity = SphereEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						SphereEntity.DeserializeLengthDelimited(stream, instance.sphereEntity, isDelta);
					}
				}
				break;
			case 34u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.stabilityEntity == null)
					{
						instance.stabilityEntity = StabilityEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						StabilityEntity.DeserializeLengthDelimited(stream, instance.stabilityEntity, isDelta);
					}
				}
				break;
			case 35u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.ownerInfo == null)
					{
						instance.ownerInfo = OwnerInfo.DeserializeLengthDelimited(stream);
					}
					else
					{
						OwnerInfo.DeserializeLengthDelimited(stream, instance.ownerInfo, isDelta);
					}
				}
				break;
			case 36u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.decayEntity == null)
					{
						instance.decayEntity = DecayEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						DecayEntity.DeserializeLengthDelimited(stream, instance.decayEntity, isDelta);
					}
				}
				break;
			case 37u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.spawnable == null)
					{
						instance.spawnable = Spawnable.DeserializeLengthDelimited(stream);
					}
					else
					{
						Spawnable.DeserializeLengthDelimited(stream, instance.spawnable, isDelta);
					}
				}
				break;
			case 38u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.servergib == null)
					{
						instance.servergib = ServerGib.DeserializeLengthDelimited(stream);
					}
					else
					{
						ServerGib.DeserializeLengthDelimited(stream, instance.servergib, isDelta);
					}
				}
				break;
			case 39u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.vendingMachine == null)
					{
						instance.vendingMachine = VendingMachine.DeserializeLengthDelimited(stream);
					}
					else
					{
						VendingMachine.DeserializeLengthDelimited(stream, instance.vendingMachine, isDelta);
					}
				}
				break;
			case 40u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.spinnerWheel == null)
					{
						instance.spinnerWheel = SpinnerWheel.DeserializeLengthDelimited(stream);
					}
					else
					{
						SpinnerWheel.DeserializeLengthDelimited(stream, instance.spinnerWheel, isDelta);
					}
				}
				break;
			case 41u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.lift == null)
					{
						instance.lift = Lift.DeserializeLengthDelimited(stream);
					}
					else
					{
						Lift.DeserializeLengthDelimited(stream, instance.lift, isDelta);
					}
				}
				break;
			case 42u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.bradley == null)
					{
						instance.bradley = BradleyAPC.DeserializeLengthDelimited(stream);
					}
					else
					{
						BradleyAPC.DeserializeLengthDelimited(stream, instance.bradley, isDelta);
					}
				}
				break;
			case 43u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.waterwell == null)
					{
						instance.waterwell = WaterWell.DeserializeLengthDelimited(stream);
					}
					else
					{
						WaterWell.DeserializeLengthDelimited(stream, instance.waterwell, isDelta);
					}
				}
				break;
			case 44u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.motorBoat == null)
					{
						instance.motorBoat = Motorboat.DeserializeLengthDelimited(stream);
					}
					else
					{
						Motorboat.DeserializeLengthDelimited(stream, instance.motorBoat, isDelta);
					}
				}
				break;
			case 45u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.ioEntity == null)
					{
						instance.ioEntity = IOEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						IOEntity.DeserializeLengthDelimited(stream, instance.ioEntity, isDelta);
					}
				}
				break;
			case 46u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.puzzleReset == null)
					{
						instance.puzzleReset = PuzzleReset.DeserializeLengthDelimited(stream);
					}
					else
					{
						PuzzleReset.DeserializeLengthDelimited(stream, instance.puzzleReset, isDelta);
					}
				}
				break;
			case 47u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.relationshipManager == null)
					{
						instance.relationshipManager = RelationshipManager.DeserializeLengthDelimited(stream);
					}
					else
					{
						RelationshipManager.DeserializeLengthDelimited(stream, instance.relationshipManager, isDelta);
					}
				}
				break;
			case 48u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.hotAirBalloon == null)
					{
						instance.hotAirBalloon = HotAirBalloon.DeserializeLengthDelimited(stream);
					}
					else
					{
						HotAirBalloon.DeserializeLengthDelimited(stream, instance.hotAirBalloon, isDelta);
					}
				}
				break;
			case 49u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.samSite == null)
					{
						instance.samSite = SAMSite.DeserializeLengthDelimited(stream);
					}
					else
					{
						SAMSite.DeserializeLengthDelimited(stream, instance.samSite, isDelta);
					}
				}
				break;
			case 50u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.eggHunt == null)
					{
						instance.eggHunt = EggHunt.DeserializeLengthDelimited(stream);
					}
					else
					{
						EggHunt.DeserializeLengthDelimited(stream, instance.eggHunt, isDelta);
					}
				}
				break;
			case 51u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.arcadeMachine == null)
					{
						instance.arcadeMachine = ArcadeMachine.DeserializeLengthDelimited(stream);
					}
					else
					{
						ArcadeMachine.DeserializeLengthDelimited(stream, instance.arcadeMachine, isDelta);
					}
				}
				break;
			case 52u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.miniCopter == null)
					{
						instance.miniCopter = Minicopter.DeserializeLengthDelimited(stream);
					}
					else
					{
						Minicopter.DeserializeLengthDelimited(stream, instance.miniCopter, isDelta);
					}
				}
				break;
			case 53u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.horse == null)
					{
						instance.horse = Horse.DeserializeLengthDelimited(stream);
					}
					else
					{
						Horse.DeserializeLengthDelimited(stream, instance.horse, isDelta);
					}
				}
				break;
			case 54u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.smartAlarm == null)
					{
						instance.smartAlarm = SmartAlarm.DeserializeLengthDelimited(stream);
					}
					else
					{
						SmartAlarm.DeserializeLengthDelimited(stream, instance.smartAlarm, isDelta);
					}
				}
				break;
			case 55u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.lightString == null)
					{
						instance.lightString = LightString.DeserializeLengthDelimited(stream);
					}
					else
					{
						LightString.DeserializeLengthDelimited(stream, instance.lightString, isDelta);
					}
				}
				break;
			case 56u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.lightDeployer == null)
					{
						instance.lightDeployer = LightDeployer.DeserializeLengthDelimited(stream);
					}
					else
					{
						LightDeployer.DeserializeLengthDelimited(stream, instance.lightDeployer, isDelta);
					}
				}
				break;
			case 57u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.rcEntity == null)
					{
						instance.rcEntity = RCEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						RCEntity.DeserializeLengthDelimited(stream, instance.rcEntity, isDelta);
					}
				}
				break;
			case 58u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.computerStation == null)
					{
						instance.computerStation = ComputerStation.DeserializeLengthDelimited(stream);
					}
					else
					{
						ComputerStation.DeserializeLengthDelimited(stream, instance.computerStation, isDelta);
					}
				}
				break;
			case 59u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.growableEntity == null)
					{
						instance.growableEntity = GrowableEntity.DeserializeLengthDelimited(stream);
					}
					else
					{
						GrowableEntity.DeserializeLengthDelimited(stream, instance.growableEntity, isDelta);
					}
				}
				break;
			case 60u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.composter == null)
					{
						instance.composter = Composter.DeserializeLengthDelimited(stream);
					}
					else
					{
						Composter.DeserializeLengthDelimited(stream, instance.composter, isDelta);
					}
				}
				break;
			case 61u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.modularVehicle == null)
					{
						instance.modularVehicle = ModularVehicle.DeserializeLengthDelimited(stream);
					}
					else
					{
						ModularVehicle.DeserializeLengthDelimited(stream, instance.modularVehicle, isDelta);
					}
				}
				break;
			case 62u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.modularCar == null)
					{
						instance.modularCar = ModularCar.DeserializeLengthDelimited(stream);
					}
					else
					{
						ModularCar.DeserializeLengthDelimited(stream, instance.modularCar, isDelta);
					}
				}
				break;
			case 63u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.simpleUID == null)
					{
						instance.simpleUID = SimpleUID.DeserializeLengthDelimited(stream);
					}
					else
					{
						SimpleUID.DeserializeLengthDelimited(stream, instance.simpleUID, isDelta);
					}
				}
				break;
			case 64u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.vehicleLift == null)
					{
						instance.vehicleLift = VehicleLift.DeserializeLengthDelimited(stream);
					}
					else
					{
						VehicleLift.DeserializeLengthDelimited(stream, instance.vehicleLift, isDelta);
					}
				}
				break;
			case 65u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.engineStorage == null)
					{
						instance.engineStorage = EngineStorage.DeserializeLengthDelimited(stream);
					}
					else
					{
						EngineStorage.DeserializeLengthDelimited(stream, instance.engineStorage, isDelta);
					}
				}
				break;
			case 66u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.vehicleVendor == null)
					{
						instance.vehicleVendor = VehicleVendor.DeserializeLengthDelimited(stream);
					}
					else
					{
						VehicleVendor.DeserializeLengthDelimited(stream, instance.vehicleVendor, isDelta);
					}
				}
				break;
			case 67u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.WaterPool == null)
					{
						instance.WaterPool = WaterPool.DeserializeLengthDelimited(stream);
					}
					else
					{
						WaterPool.DeserializeLengthDelimited(stream, instance.WaterPool, isDelta);
					}
				}
				break;
			case 68u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.photo == null)
					{
						instance.photo = Photo.DeserializeLengthDelimited(stream);
					}
					else
					{
						Photo.DeserializeLengthDelimited(stream, instance.photo, isDelta);
					}
				}
				break;
			case 69u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.photoFrame == null)
					{
						instance.photoFrame = PhotoFrame.DeserializeLengthDelimited(stream);
					}
					else
					{
						PhotoFrame.DeserializeLengthDelimited(stream, instance.photoFrame, isDelta);
					}
				}
				break;
			case 70u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.vehicleModule == null)
					{
						instance.vehicleModule = VehicleModule.DeserializeLengthDelimited(stream);
					}
					else
					{
						VehicleModule.DeserializeLengthDelimited(stream, instance.vehicleModule, isDelta);
					}
				}
				break;
			case 71u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.mixingTable == null)
					{
						instance.mixingTable = MixingTable.DeserializeLengthDelimited(stream);
					}
					else
					{
						MixingTable.DeserializeLengthDelimited(stream, instance.mixingTable, isDelta);
					}
				}
				break;
			case 72u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.shopKeeper == null)
					{
						instance.shopKeeper = ShopKeeper.DeserializeLengthDelimited(stream);
					}
					else
					{
						ShopKeeper.DeserializeLengthDelimited(stream, instance.shopKeeper, isDelta);
					}
				}
				break;
			case 73u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.elevator == null)
					{
						instance.elevator = Elevator.DeserializeLengthDelimited(stream);
					}
					else
					{
						Elevator.DeserializeLengthDelimited(stream, instance.elevator, isDelta);
					}
				}
				break;
			case 74u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.skullTrophy == null)
					{
						instance.skullTrophy = SkullTrophy.DeserializeLengthDelimited(stream);
					}
					else
					{
						SkullTrophy.DeserializeLengthDelimited(stream, instance.skullTrophy, isDelta);
					}
				}
				break;
			case 75u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.cassette == null)
					{
						instance.cassette = Cassette.DeserializeLengthDelimited(stream);
					}
					else
					{
						Cassette.DeserializeLengthDelimited(stream, instance.cassette, isDelta);
					}
				}
				break;
			case 76u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.telephone == null)
					{
						instance.telephone = Telephone.DeserializeLengthDelimited(stream);
					}
					else
					{
						Telephone.DeserializeLengthDelimited(stream, instance.telephone, isDelta);
					}
				}
				break;
			case 77u:
				if (key.WireType == Wire.LengthDelimited)
				{
					if (instance.boomBox == null)
					{
						instance.boomBox = BoomBox.DeserializeLengthDelimited(stream);
					}
					else
					{
						BoomBox.DeserializeLengthDelimited(stream, instance.boomBox, isDelta);
					}
				}
				break;
			case 100u:
				if (key.WireType == Wire.Varint)
				{
					instance.createdThisFrame = ProtocolParser.ReadBool(stream);
				}
				break;
			default:
				ProtocolParser.SkipKey(stream, key);
				break;
			}
		}
		if (stream.Position != num)
		{
			throw new ProtocolBufferException("Read past max limit");
		}
		return instance;
	}

	public static void SerializeDelta(Stream stream, Entity instance, Entity previous)
	{
		MemoryStream obj = Pool.Get<MemoryStream>();
		if (instance.baseNetworkable != null)
		{
			stream.WriteByte(10);
			obj.SetLength(0L);
			BaseNetworkable.SerializeDelta(obj, instance.baseNetworkable, previous.baseNetworkable);
			uint num = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num);
			stream.Write(obj.GetBuffer(), 0, (int)num);
		}
		if (instance.baseEntity != null)
		{
			stream.WriteByte(18);
			obj.SetLength(0L);
			BaseEntity.SerializeDelta(obj, instance.baseEntity, previous.baseEntity);
			uint num2 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num2);
			stream.Write(obj.GetBuffer(), 0, (int)num2);
		}
		if (instance.basePlayer != null)
		{
			stream.WriteByte(26);
			obj.SetLength(0L);
			BasePlayer.SerializeDelta(obj, instance.basePlayer, previous.basePlayer);
			uint num3 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num3);
			stream.Write(obj.GetBuffer(), 0, (int)num3);
		}
		if (instance.worldItem != null)
		{
			stream.WriteByte(34);
			obj.SetLength(0L);
			WorldItem.SerializeDelta(obj, instance.worldItem, previous.worldItem);
			uint num4 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num4);
			stream.Write(obj.GetBuffer(), 0, (int)num4);
		}
		if (instance.resource != null)
		{
			stream.WriteByte(42);
			obj.SetLength(0L);
			BaseResource.SerializeDelta(obj, instance.resource, previous.resource);
			uint num5 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num5);
			stream.Write(obj.GetBuffer(), 0, (int)num5);
		}
		if (instance.buildingBlock != null)
		{
			stream.WriteByte(50);
			obj.SetLength(0L);
			BuildingBlock.SerializeDelta(obj, instance.buildingBlock, previous.buildingBlock);
			uint num6 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num6);
			stream.Write(obj.GetBuffer(), 0, (int)num6);
		}
		if (instance.environment != null)
		{
			stream.WriteByte(58);
			obj.SetLength(0L);
			ProtoBuf.Environment.SerializeDelta(obj, instance.environment, previous.environment);
			uint num7 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num7);
			stream.Write(obj.GetBuffer(), 0, (int)num7);
		}
		if (instance.corpse != null)
		{
			stream.WriteByte(66);
			obj.SetLength(0L);
			Corpse.SerializeDelta(obj, instance.corpse, previous.corpse);
			uint num8 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num8);
			stream.Write(obj.GetBuffer(), 0, (int)num8);
		}
		if (instance.parent != null)
		{
			stream.WriteByte(82);
			obj.SetLength(0L);
			ParentInfo.SerializeDelta(obj, instance.parent, previous.parent);
			uint num9 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num9);
			stream.Write(obj.GetBuffer(), 0, (int)num9);
		}
		if (instance.keyLock != null)
		{
			stream.WriteByte(90);
			obj.SetLength(0L);
			KeyLock.SerializeDelta(obj, instance.keyLock, previous.keyLock);
			uint num10 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num10);
			stream.Write(obj.GetBuffer(), 0, (int)num10);
		}
		if (instance.codeLock != null)
		{
			stream.WriteByte(98);
			obj.SetLength(0L);
			CodeLock.SerializeDelta(obj, instance.codeLock, previous.codeLock);
			uint num11 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num11);
			stream.Write(obj.GetBuffer(), 0, (int)num11);
		}
		if (instance.entitySlots != null)
		{
			stream.WriteByte(106);
			obj.SetLength(0L);
			EntitySlots.SerializeDelta(obj, instance.entitySlots, previous.entitySlots);
			uint num12 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num12);
			stream.Write(obj.GetBuffer(), 0, (int)num12);
		}
		if (instance.buildingPrivilege != null)
		{
			stream.WriteByte(114);
			obj.SetLength(0L);
			BuildingPrivilege.SerializeDelta(obj, instance.buildingPrivilege, previous.buildingPrivilege);
			uint num13 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num13);
			stream.Write(obj.GetBuffer(), 0, (int)num13);
		}
		if (instance.storageBox != null)
		{
			stream.WriteByte(122);
			obj.SetLength(0L);
			StorageBox.SerializeDelta(obj, instance.storageBox, previous.storageBox);
			uint num14 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num14);
			stream.Write(obj.GetBuffer(), 0, (int)num14);
		}
		if (instance.heldEntity != null)
		{
			stream.WriteByte(130);
			stream.WriteByte(1);
			obj.SetLength(0L);
			HeldEntity.SerializeDelta(obj, instance.heldEntity, previous.heldEntity);
			uint num15 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num15);
			stream.Write(obj.GetBuffer(), 0, (int)num15);
		}
		if (instance.baseProjectile != null)
		{
			stream.WriteByte(138);
			stream.WriteByte(1);
			obj.SetLength(0L);
			BaseProjectile.SerializeDelta(obj, instance.baseProjectile, previous.baseProjectile);
			uint num16 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num16);
			stream.Write(obj.GetBuffer(), 0, (int)num16);
		}
		if (instance.baseNPC != null)
		{
			stream.WriteByte(146);
			stream.WriteByte(1);
			obj.SetLength(0L);
			BaseNPC.SerializeDelta(obj, instance.baseNPC, previous.baseNPC);
			uint num17 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num17);
			stream.Write(obj.GetBuffer(), 0, (int)num17);
		}
		if (instance.loot != null)
		{
			stream.WriteByte(154);
			stream.WriteByte(1);
			obj.SetLength(0L);
			Loot.SerializeDelta(obj, instance.loot, previous.loot);
			uint num18 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num18);
			stream.Write(obj.GetBuffer(), 0, (int)num18);
		}
		if (instance.genericSpawner != null)
		{
			stream.WriteByte(162);
			stream.WriteByte(1);
			obj.SetLength(0L);
			GenericSpawner.SerializeDelta(obj, instance.genericSpawner, previous.genericSpawner);
			uint num19 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num19);
			stream.Write(obj.GetBuffer(), 0, (int)num19);
		}
		if (instance.sleepingBag != null)
		{
			stream.WriteByte(170);
			stream.WriteByte(1);
			obj.SetLength(0L);
			SleepingBag.SerializeDelta(obj, instance.sleepingBag, previous.sleepingBag);
			uint num20 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num20);
			stream.Write(obj.GetBuffer(), 0, (int)num20);
		}
		if (instance.lootableCorpse != null)
		{
			stream.WriteByte(178);
			stream.WriteByte(1);
			obj.SetLength(0L);
			LootableCorpse.SerializeDelta(obj, instance.lootableCorpse, previous.lootableCorpse);
			uint num21 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num21);
			stream.Write(obj.GetBuffer(), 0, (int)num21);
		}
		if (instance.sign != null)
		{
			stream.WriteByte(186);
			stream.WriteByte(1);
			obj.SetLength(0L);
			Sign.SerializeDelta(obj, instance.sign, previous.sign);
			uint num22 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num22);
			stream.Write(obj.GetBuffer(), 0, (int)num22);
		}
		if (instance.baseCombat != null)
		{
			stream.WriteByte(194);
			stream.WriteByte(1);
			obj.SetLength(0L);
			BaseCombat.SerializeDelta(obj, instance.baseCombat, previous.baseCombat);
			uint num23 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num23);
			stream.Write(obj.GetBuffer(), 0, (int)num23);
		}
		if (instance.mapEntity != null)
		{
			stream.WriteByte(202);
			stream.WriteByte(1);
			obj.SetLength(0L);
			MapEntity.SerializeDelta(obj, instance.mapEntity, previous.mapEntity);
			uint num24 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num24);
			stream.Write(obj.GetBuffer(), 0, (int)num24);
		}
		if (instance.researchTable != null)
		{
			stream.WriteByte(210);
			stream.WriteByte(1);
			obj.SetLength(0L);
			ResearchTable.SerializeDelta(obj, instance.researchTable, previous.researchTable);
			uint num25 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num25);
			stream.Write(obj.GetBuffer(), 0, (int)num25);
		}
		if (instance.dudExplosive != null)
		{
			stream.WriteByte(218);
			stream.WriteByte(1);
			obj.SetLength(0L);
			DudExplosive.SerializeDelta(obj, instance.dudExplosive, previous.dudExplosive);
			uint num26 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num26);
			stream.Write(obj.GetBuffer(), 0, (int)num26);
		}
		if (instance.miningQuarry != null)
		{
			stream.WriteByte(226);
			stream.WriteByte(1);
			obj.SetLength(0L);
			MiningQuarry.SerializeDelta(obj, instance.miningQuarry, previous.miningQuarry);
			uint num27 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num27);
			stream.Write(obj.GetBuffer(), 0, (int)num27);
		}
		if (instance.helicopter != null)
		{
			stream.WriteByte(242);
			stream.WriteByte(1);
			obj.SetLength(0L);
			Helicopter.SerializeDelta(obj, instance.helicopter, previous.helicopter);
			uint num28 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num28);
			stream.Write(obj.GetBuffer(), 0, (int)num28);
		}
		if (instance.landmine != null)
		{
			stream.WriteByte(250);
			stream.WriteByte(1);
			obj.SetLength(0L);
			Landmine.SerializeDelta(obj, instance.landmine, previous.landmine);
			uint num29 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num29);
			stream.Write(obj.GetBuffer(), 0, (int)num29);
		}
		if (instance.autoturret != null)
		{
			stream.WriteByte(130);
			stream.WriteByte(2);
			obj.SetLength(0L);
			AutoTurret.SerializeDelta(obj, instance.autoturret, previous.autoturret);
			uint num30 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num30);
			stream.Write(obj.GetBuffer(), 0, (int)num30);
		}
		if (instance.sphereEntity != null)
		{
			stream.WriteByte(138);
			stream.WriteByte(2);
			obj.SetLength(0L);
			SphereEntity.SerializeDelta(obj, instance.sphereEntity, previous.sphereEntity);
			uint num31 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num31);
			stream.Write(obj.GetBuffer(), 0, (int)num31);
		}
		if (instance.stabilityEntity != null)
		{
			stream.WriteByte(146);
			stream.WriteByte(2);
			obj.SetLength(0L);
			StabilityEntity.SerializeDelta(obj, instance.stabilityEntity, previous.stabilityEntity);
			uint num32 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num32);
			stream.Write(obj.GetBuffer(), 0, (int)num32);
		}
		if (instance.ownerInfo != null)
		{
			stream.WriteByte(154);
			stream.WriteByte(2);
			obj.SetLength(0L);
			OwnerInfo.SerializeDelta(obj, instance.ownerInfo, previous.ownerInfo);
			uint num33 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num33);
			stream.Write(obj.GetBuffer(), 0, (int)num33);
		}
		if (instance.decayEntity != null)
		{
			stream.WriteByte(162);
			stream.WriteByte(2);
			obj.SetLength(0L);
			DecayEntity.SerializeDelta(obj, instance.decayEntity, previous.decayEntity);
			uint num34 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num34);
			stream.Write(obj.GetBuffer(), 0, (int)num34);
		}
		if (instance.spawnable != null)
		{
			stream.WriteByte(170);
			stream.WriteByte(2);
			obj.SetLength(0L);
			Spawnable.SerializeDelta(obj, instance.spawnable, previous.spawnable);
			uint num35 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num35);
			stream.Write(obj.GetBuffer(), 0, (int)num35);
		}
		if (instance.servergib != null)
		{
			stream.WriteByte(178);
			stream.WriteByte(2);
			obj.SetLength(0L);
			ServerGib.SerializeDelta(obj, instance.servergib, previous.servergib);
			uint num36 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num36);
			stream.Write(obj.GetBuffer(), 0, (int)num36);
		}
		if (instance.vendingMachine != null)
		{
			stream.WriteByte(186);
			stream.WriteByte(2);
			obj.SetLength(0L);
			VendingMachine.SerializeDelta(obj, instance.vendingMachine, previous.vendingMachine);
			uint num37 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num37);
			stream.Write(obj.GetBuffer(), 0, (int)num37);
		}
		if (instance.spinnerWheel != null)
		{
			stream.WriteByte(194);
			stream.WriteByte(2);
			obj.SetLength(0L);
			SpinnerWheel.SerializeDelta(obj, instance.spinnerWheel, previous.spinnerWheel);
			uint num38 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num38);
			stream.Write(obj.GetBuffer(), 0, (int)num38);
		}
		if (instance.lift != null)
		{
			stream.WriteByte(202);
			stream.WriteByte(2);
			obj.SetLength(0L);
			Lift.SerializeDelta(obj, instance.lift, previous.lift);
			uint num39 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num39);
			stream.Write(obj.GetBuffer(), 0, (int)num39);
		}
		if (instance.bradley != null)
		{
			stream.WriteByte(210);
			stream.WriteByte(2);
			obj.SetLength(0L);
			BradleyAPC.SerializeDelta(obj, instance.bradley, previous.bradley);
			uint num40 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num40);
			stream.Write(obj.GetBuffer(), 0, (int)num40);
		}
		if (instance.waterwell != null)
		{
			stream.WriteByte(218);
			stream.WriteByte(2);
			obj.SetLength(0L);
			WaterWell.SerializeDelta(obj, instance.waterwell, previous.waterwell);
			uint num41 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num41);
			stream.Write(obj.GetBuffer(), 0, (int)num41);
		}
		if (instance.motorBoat != null)
		{
			stream.WriteByte(226);
			stream.WriteByte(2);
			obj.SetLength(0L);
			Motorboat.SerializeDelta(obj, instance.motorBoat, previous.motorBoat);
			uint num42 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num42);
			stream.Write(obj.GetBuffer(), 0, (int)num42);
		}
		if (instance.ioEntity != null)
		{
			stream.WriteByte(234);
			stream.WriteByte(2);
			obj.SetLength(0L);
			IOEntity.SerializeDelta(obj, instance.ioEntity, previous.ioEntity);
			uint num43 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num43);
			stream.Write(obj.GetBuffer(), 0, (int)num43);
		}
		if (instance.puzzleReset != null)
		{
			stream.WriteByte(242);
			stream.WriteByte(2);
			obj.SetLength(0L);
			PuzzleReset.SerializeDelta(obj, instance.puzzleReset, previous.puzzleReset);
			uint num44 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num44);
			stream.Write(obj.GetBuffer(), 0, (int)num44);
		}
		if (instance.relationshipManager != null)
		{
			stream.WriteByte(250);
			stream.WriteByte(2);
			obj.SetLength(0L);
			RelationshipManager.SerializeDelta(obj, instance.relationshipManager, previous.relationshipManager);
			uint num45 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num45);
			stream.Write(obj.GetBuffer(), 0, (int)num45);
		}
		if (instance.hotAirBalloon != null)
		{
			stream.WriteByte(130);
			stream.WriteByte(3);
			obj.SetLength(0L);
			HotAirBalloon.SerializeDelta(obj, instance.hotAirBalloon, previous.hotAirBalloon);
			uint num46 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num46);
			stream.Write(obj.GetBuffer(), 0, (int)num46);
		}
		if (instance.samSite != null)
		{
			stream.WriteByte(138);
			stream.WriteByte(3);
			obj.SetLength(0L);
			SAMSite.SerializeDelta(obj, instance.samSite, previous.samSite);
			uint num47 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num47);
			stream.Write(obj.GetBuffer(), 0, (int)num47);
		}
		if (instance.eggHunt != null)
		{
			stream.WriteByte(146);
			stream.WriteByte(3);
			obj.SetLength(0L);
			EggHunt.SerializeDelta(obj, instance.eggHunt, previous.eggHunt);
			uint num48 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num48);
			stream.Write(obj.GetBuffer(), 0, (int)num48);
		}
		if (instance.arcadeMachine != null)
		{
			stream.WriteByte(154);
			stream.WriteByte(3);
			obj.SetLength(0L);
			ArcadeMachine.SerializeDelta(obj, instance.arcadeMachine, previous.arcadeMachine);
			uint num49 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num49);
			stream.Write(obj.GetBuffer(), 0, (int)num49);
		}
		if (instance.miniCopter != null)
		{
			stream.WriteByte(162);
			stream.WriteByte(3);
			obj.SetLength(0L);
			Minicopter.SerializeDelta(obj, instance.miniCopter, previous.miniCopter);
			uint num50 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num50);
			stream.Write(obj.GetBuffer(), 0, (int)num50);
		}
		if (instance.horse != null)
		{
			stream.WriteByte(170);
			stream.WriteByte(3);
			obj.SetLength(0L);
			Horse.SerializeDelta(obj, instance.horse, previous.horse);
			uint num51 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num51);
			stream.Write(obj.GetBuffer(), 0, (int)num51);
		}
		if (instance.smartAlarm != null)
		{
			stream.WriteByte(178);
			stream.WriteByte(3);
			obj.SetLength(0L);
			SmartAlarm.SerializeDelta(obj, instance.smartAlarm, previous.smartAlarm);
			uint num52 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num52);
			stream.Write(obj.GetBuffer(), 0, (int)num52);
		}
		if (instance.lightString != null)
		{
			stream.WriteByte(186);
			stream.WriteByte(3);
			obj.SetLength(0L);
			LightString.SerializeDelta(obj, instance.lightString, previous.lightString);
			uint num53 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num53);
			stream.Write(obj.GetBuffer(), 0, (int)num53);
		}
		if (instance.lightDeployer != null)
		{
			stream.WriteByte(194);
			stream.WriteByte(3);
			obj.SetLength(0L);
			LightDeployer.SerializeDelta(obj, instance.lightDeployer, previous.lightDeployer);
			uint num54 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num54);
			stream.Write(obj.GetBuffer(), 0, (int)num54);
		}
		if (instance.rcEntity != null)
		{
			stream.WriteByte(202);
			stream.WriteByte(3);
			obj.SetLength(0L);
			RCEntity.SerializeDelta(obj, instance.rcEntity, previous.rcEntity);
			uint num55 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num55);
			stream.Write(obj.GetBuffer(), 0, (int)num55);
		}
		if (instance.computerStation != null)
		{
			stream.WriteByte(210);
			stream.WriteByte(3);
			obj.SetLength(0L);
			ComputerStation.SerializeDelta(obj, instance.computerStation, previous.computerStation);
			uint num56 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num56);
			stream.Write(obj.GetBuffer(), 0, (int)num56);
		}
		if (instance.growableEntity != null)
		{
			stream.WriteByte(218);
			stream.WriteByte(3);
			obj.SetLength(0L);
			GrowableEntity.SerializeDelta(obj, instance.growableEntity, previous.growableEntity);
			uint num57 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num57);
			stream.Write(obj.GetBuffer(), 0, (int)num57);
		}
		if (instance.composter != null)
		{
			stream.WriteByte(226);
			stream.WriteByte(3);
			obj.SetLength(0L);
			Composter.SerializeDelta(obj, instance.composter, previous.composter);
			uint num58 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num58);
			stream.Write(obj.GetBuffer(), 0, (int)num58);
		}
		if (instance.modularVehicle != null)
		{
			stream.WriteByte(234);
			stream.WriteByte(3);
			obj.SetLength(0L);
			ModularVehicle.SerializeDelta(obj, instance.modularVehicle, previous.modularVehicle);
			uint num59 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num59);
			stream.Write(obj.GetBuffer(), 0, (int)num59);
		}
		if (instance.modularCar != null)
		{
			stream.WriteByte(242);
			stream.WriteByte(3);
			obj.SetLength(0L);
			ModularCar.SerializeDelta(obj, instance.modularCar, previous.modularCar);
			uint num60 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num60);
			stream.Write(obj.GetBuffer(), 0, (int)num60);
		}
		if (instance.simpleUID != null)
		{
			stream.WriteByte(250);
			stream.WriteByte(3);
			obj.SetLength(0L);
			SimpleUID.SerializeDelta(obj, instance.simpleUID, previous.simpleUID);
			uint num61 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num61);
			stream.Write(obj.GetBuffer(), 0, (int)num61);
		}
		if (instance.vehicleLift != null)
		{
			stream.WriteByte(130);
			stream.WriteByte(4);
			obj.SetLength(0L);
			VehicleLift.SerializeDelta(obj, instance.vehicleLift, previous.vehicleLift);
			uint num62 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num62);
			stream.Write(obj.GetBuffer(), 0, (int)num62);
		}
		if (instance.engineStorage != null)
		{
			stream.WriteByte(138);
			stream.WriteByte(4);
			obj.SetLength(0L);
			EngineStorage.SerializeDelta(obj, instance.engineStorage, previous.engineStorage);
			uint num63 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num63);
			stream.Write(obj.GetBuffer(), 0, (int)num63);
		}
		if (instance.vehicleVendor != null)
		{
			stream.WriteByte(146);
			stream.WriteByte(4);
			obj.SetLength(0L);
			VehicleVendor.SerializeDelta(obj, instance.vehicleVendor, previous.vehicleVendor);
			uint num64 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num64);
			stream.Write(obj.GetBuffer(), 0, (int)num64);
		}
		if (instance.WaterPool != null)
		{
			stream.WriteByte(154);
			stream.WriteByte(4);
			obj.SetLength(0L);
			WaterPool.SerializeDelta(obj, instance.WaterPool, previous.WaterPool);
			uint num65 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num65);
			stream.Write(obj.GetBuffer(), 0, (int)num65);
		}
		if (instance.photo != null)
		{
			stream.WriteByte(162);
			stream.WriteByte(4);
			obj.SetLength(0L);
			Photo.SerializeDelta(obj, instance.photo, previous.photo);
			uint num66 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num66);
			stream.Write(obj.GetBuffer(), 0, (int)num66);
		}
		if (instance.photoFrame != null)
		{
			stream.WriteByte(170);
			stream.WriteByte(4);
			obj.SetLength(0L);
			PhotoFrame.SerializeDelta(obj, instance.photoFrame, previous.photoFrame);
			uint num67 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num67);
			stream.Write(obj.GetBuffer(), 0, (int)num67);
		}
		if (instance.vehicleModule != null)
		{
			stream.WriteByte(178);
			stream.WriteByte(4);
			obj.SetLength(0L);
			VehicleModule.SerializeDelta(obj, instance.vehicleModule, previous.vehicleModule);
			uint num68 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num68);
			stream.Write(obj.GetBuffer(), 0, (int)num68);
		}
		if (instance.mixingTable != null)
		{
			stream.WriteByte(186);
			stream.WriteByte(4);
			obj.SetLength(0L);
			MixingTable.SerializeDelta(obj, instance.mixingTable, previous.mixingTable);
			uint num69 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num69);
			stream.Write(obj.GetBuffer(), 0, (int)num69);
		}
		if (instance.shopKeeper != null)
		{
			stream.WriteByte(194);
			stream.WriteByte(4);
			obj.SetLength(0L);
			ShopKeeper.SerializeDelta(obj, instance.shopKeeper, previous.shopKeeper);
			uint num70 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num70);
			stream.Write(obj.GetBuffer(), 0, (int)num70);
		}
		if (instance.elevator != null)
		{
			stream.WriteByte(202);
			stream.WriteByte(4);
			obj.SetLength(0L);
			Elevator.SerializeDelta(obj, instance.elevator, previous.elevator);
			uint num71 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num71);
			stream.Write(obj.GetBuffer(), 0, (int)num71);
		}
		if (instance.skullTrophy != null)
		{
			stream.WriteByte(210);
			stream.WriteByte(4);
			obj.SetLength(0L);
			SkullTrophy.SerializeDelta(obj, instance.skullTrophy, previous.skullTrophy);
			uint num72 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num72);
			stream.Write(obj.GetBuffer(), 0, (int)num72);
		}
		if (instance.cassette != null)
		{
			stream.WriteByte(218);
			stream.WriteByte(4);
			obj.SetLength(0L);
			Cassette.SerializeDelta(obj, instance.cassette, previous.cassette);
			uint num73 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num73);
			stream.Write(obj.GetBuffer(), 0, (int)num73);
		}
		if (instance.telephone != null)
		{
			stream.WriteByte(226);
			stream.WriteByte(4);
			obj.SetLength(0L);
			Telephone.SerializeDelta(obj, instance.telephone, previous.telephone);
			uint num74 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num74);
			stream.Write(obj.GetBuffer(), 0, (int)num74);
		}
		if (instance.boomBox != null)
		{
			stream.WriteByte(234);
			stream.WriteByte(4);
			obj.SetLength(0L);
			BoomBox.SerializeDelta(obj, instance.boomBox, previous.boomBox);
			uint num75 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num75);
			stream.Write(obj.GetBuffer(), 0, (int)num75);
		}
		stream.WriteByte(160);
		stream.WriteByte(6);
		ProtocolParser.WriteBool(stream, instance.createdThisFrame);
		Pool.FreeMemoryStream(ref obj);
	}

	public static void Serialize(Stream stream, Entity instance)
	{
		MemoryStream obj = Pool.Get<MemoryStream>();
		if (instance.baseNetworkable != null)
		{
			stream.WriteByte(10);
			obj.SetLength(0L);
			BaseNetworkable.Serialize(obj, instance.baseNetworkable);
			uint num = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num);
			stream.Write(obj.GetBuffer(), 0, (int)num);
		}
		if (instance.baseEntity != null)
		{
			stream.WriteByte(18);
			obj.SetLength(0L);
			BaseEntity.Serialize(obj, instance.baseEntity);
			uint num2 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num2);
			stream.Write(obj.GetBuffer(), 0, (int)num2);
		}
		if (instance.basePlayer != null)
		{
			stream.WriteByte(26);
			obj.SetLength(0L);
			BasePlayer.Serialize(obj, instance.basePlayer);
			uint num3 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num3);
			stream.Write(obj.GetBuffer(), 0, (int)num3);
		}
		if (instance.worldItem != null)
		{
			stream.WriteByte(34);
			obj.SetLength(0L);
			WorldItem.Serialize(obj, instance.worldItem);
			uint num4 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num4);
			stream.Write(obj.GetBuffer(), 0, (int)num4);
		}
		if (instance.resource != null)
		{
			stream.WriteByte(42);
			obj.SetLength(0L);
			BaseResource.Serialize(obj, instance.resource);
			uint num5 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num5);
			stream.Write(obj.GetBuffer(), 0, (int)num5);
		}
		if (instance.buildingBlock != null)
		{
			stream.WriteByte(50);
			obj.SetLength(0L);
			BuildingBlock.Serialize(obj, instance.buildingBlock);
			uint num6 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num6);
			stream.Write(obj.GetBuffer(), 0, (int)num6);
		}
		if (instance.environment != null)
		{
			stream.WriteByte(58);
			obj.SetLength(0L);
			ProtoBuf.Environment.Serialize(obj, instance.environment);
			uint num7 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num7);
			stream.Write(obj.GetBuffer(), 0, (int)num7);
		}
		if (instance.corpse != null)
		{
			stream.WriteByte(66);
			obj.SetLength(0L);
			Corpse.Serialize(obj, instance.corpse);
			uint num8 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num8);
			stream.Write(obj.GetBuffer(), 0, (int)num8);
		}
		if (instance.parent != null)
		{
			stream.WriteByte(82);
			obj.SetLength(0L);
			ParentInfo.Serialize(obj, instance.parent);
			uint num9 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num9);
			stream.Write(obj.GetBuffer(), 0, (int)num9);
		}
		if (instance.keyLock != null)
		{
			stream.WriteByte(90);
			obj.SetLength(0L);
			KeyLock.Serialize(obj, instance.keyLock);
			uint num10 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num10);
			stream.Write(obj.GetBuffer(), 0, (int)num10);
		}
		if (instance.codeLock != null)
		{
			stream.WriteByte(98);
			obj.SetLength(0L);
			CodeLock.Serialize(obj, instance.codeLock);
			uint num11 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num11);
			stream.Write(obj.GetBuffer(), 0, (int)num11);
		}
		if (instance.entitySlots != null)
		{
			stream.WriteByte(106);
			obj.SetLength(0L);
			EntitySlots.Serialize(obj, instance.entitySlots);
			uint num12 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num12);
			stream.Write(obj.GetBuffer(), 0, (int)num12);
		}
		if (instance.buildingPrivilege != null)
		{
			stream.WriteByte(114);
			obj.SetLength(0L);
			BuildingPrivilege.Serialize(obj, instance.buildingPrivilege);
			uint num13 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num13);
			stream.Write(obj.GetBuffer(), 0, (int)num13);
		}
		if (instance.storageBox != null)
		{
			stream.WriteByte(122);
			obj.SetLength(0L);
			StorageBox.Serialize(obj, instance.storageBox);
			uint num14 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num14);
			stream.Write(obj.GetBuffer(), 0, (int)num14);
		}
		if (instance.heldEntity != null)
		{
			stream.WriteByte(130);
			stream.WriteByte(1);
			obj.SetLength(0L);
			HeldEntity.Serialize(obj, instance.heldEntity);
			uint num15 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num15);
			stream.Write(obj.GetBuffer(), 0, (int)num15);
		}
		if (instance.baseProjectile != null)
		{
			stream.WriteByte(138);
			stream.WriteByte(1);
			obj.SetLength(0L);
			BaseProjectile.Serialize(obj, instance.baseProjectile);
			uint num16 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num16);
			stream.Write(obj.GetBuffer(), 0, (int)num16);
		}
		if (instance.baseNPC != null)
		{
			stream.WriteByte(146);
			stream.WriteByte(1);
			obj.SetLength(0L);
			BaseNPC.Serialize(obj, instance.baseNPC);
			uint num17 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num17);
			stream.Write(obj.GetBuffer(), 0, (int)num17);
		}
		if (instance.loot != null)
		{
			stream.WriteByte(154);
			stream.WriteByte(1);
			obj.SetLength(0L);
			Loot.Serialize(obj, instance.loot);
			uint num18 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num18);
			stream.Write(obj.GetBuffer(), 0, (int)num18);
		}
		if (instance.genericSpawner != null)
		{
			stream.WriteByte(162);
			stream.WriteByte(1);
			obj.SetLength(0L);
			GenericSpawner.Serialize(obj, instance.genericSpawner);
			uint num19 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num19);
			stream.Write(obj.GetBuffer(), 0, (int)num19);
		}
		if (instance.sleepingBag != null)
		{
			stream.WriteByte(170);
			stream.WriteByte(1);
			obj.SetLength(0L);
			SleepingBag.Serialize(obj, instance.sleepingBag);
			uint num20 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num20);
			stream.Write(obj.GetBuffer(), 0, (int)num20);
		}
		if (instance.lootableCorpse != null)
		{
			stream.WriteByte(178);
			stream.WriteByte(1);
			obj.SetLength(0L);
			LootableCorpse.Serialize(obj, instance.lootableCorpse);
			uint num21 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num21);
			stream.Write(obj.GetBuffer(), 0, (int)num21);
		}
		if (instance.sign != null)
		{
			stream.WriteByte(186);
			stream.WriteByte(1);
			obj.SetLength(0L);
			Sign.Serialize(obj, instance.sign);
			uint num22 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num22);
			stream.Write(obj.GetBuffer(), 0, (int)num22);
		}
		if (instance.baseCombat != null)
		{
			stream.WriteByte(194);
			stream.WriteByte(1);
			obj.SetLength(0L);
			BaseCombat.Serialize(obj, instance.baseCombat);
			uint num23 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num23);
			stream.Write(obj.GetBuffer(), 0, (int)num23);
		}
		if (instance.mapEntity != null)
		{
			stream.WriteByte(202);
			stream.WriteByte(1);
			obj.SetLength(0L);
			MapEntity.Serialize(obj, instance.mapEntity);
			uint num24 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num24);
			stream.Write(obj.GetBuffer(), 0, (int)num24);
		}
		if (instance.researchTable != null)
		{
			stream.WriteByte(210);
			stream.WriteByte(1);
			obj.SetLength(0L);
			ResearchTable.Serialize(obj, instance.researchTable);
			uint num25 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num25);
			stream.Write(obj.GetBuffer(), 0, (int)num25);
		}
		if (instance.dudExplosive != null)
		{
			stream.WriteByte(218);
			stream.WriteByte(1);
			obj.SetLength(0L);
			DudExplosive.Serialize(obj, instance.dudExplosive);
			uint num26 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num26);
			stream.Write(obj.GetBuffer(), 0, (int)num26);
		}
		if (instance.miningQuarry != null)
		{
			stream.WriteByte(226);
			stream.WriteByte(1);
			obj.SetLength(0L);
			MiningQuarry.Serialize(obj, instance.miningQuarry);
			uint num27 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num27);
			stream.Write(obj.GetBuffer(), 0, (int)num27);
		}
		if (instance.helicopter != null)
		{
			stream.WriteByte(242);
			stream.WriteByte(1);
			obj.SetLength(0L);
			Helicopter.Serialize(obj, instance.helicopter);
			uint num28 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num28);
			stream.Write(obj.GetBuffer(), 0, (int)num28);
		}
		if (instance.landmine != null)
		{
			stream.WriteByte(250);
			stream.WriteByte(1);
			obj.SetLength(0L);
			Landmine.Serialize(obj, instance.landmine);
			uint num29 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num29);
			stream.Write(obj.GetBuffer(), 0, (int)num29);
		}
		if (instance.autoturret != null)
		{
			stream.WriteByte(130);
			stream.WriteByte(2);
			obj.SetLength(0L);
			AutoTurret.Serialize(obj, instance.autoturret);
			uint num30 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num30);
			stream.Write(obj.GetBuffer(), 0, (int)num30);
		}
		if (instance.sphereEntity != null)
		{
			stream.WriteByte(138);
			stream.WriteByte(2);
			obj.SetLength(0L);
			SphereEntity.Serialize(obj, instance.sphereEntity);
			uint num31 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num31);
			stream.Write(obj.GetBuffer(), 0, (int)num31);
		}
		if (instance.stabilityEntity != null)
		{
			stream.WriteByte(146);
			stream.WriteByte(2);
			obj.SetLength(0L);
			StabilityEntity.Serialize(obj, instance.stabilityEntity);
			uint num32 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num32);
			stream.Write(obj.GetBuffer(), 0, (int)num32);
		}
		if (instance.ownerInfo != null)
		{
			stream.WriteByte(154);
			stream.WriteByte(2);
			obj.SetLength(0L);
			OwnerInfo.Serialize(obj, instance.ownerInfo);
			uint num33 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num33);
			stream.Write(obj.GetBuffer(), 0, (int)num33);
		}
		if (instance.decayEntity != null)
		{
			stream.WriteByte(162);
			stream.WriteByte(2);
			obj.SetLength(0L);
			DecayEntity.Serialize(obj, instance.decayEntity);
			uint num34 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num34);
			stream.Write(obj.GetBuffer(), 0, (int)num34);
		}
		if (instance.spawnable != null)
		{
			stream.WriteByte(170);
			stream.WriteByte(2);
			obj.SetLength(0L);
			Spawnable.Serialize(obj, instance.spawnable);
			uint num35 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num35);
			stream.Write(obj.GetBuffer(), 0, (int)num35);
		}
		if (instance.servergib != null)
		{
			stream.WriteByte(178);
			stream.WriteByte(2);
			obj.SetLength(0L);
			ServerGib.Serialize(obj, instance.servergib);
			uint num36 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num36);
			stream.Write(obj.GetBuffer(), 0, (int)num36);
		}
		if (instance.vendingMachine != null)
		{
			stream.WriteByte(186);
			stream.WriteByte(2);
			obj.SetLength(0L);
			VendingMachine.Serialize(obj, instance.vendingMachine);
			uint num37 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num37);
			stream.Write(obj.GetBuffer(), 0, (int)num37);
		}
		if (instance.spinnerWheel != null)
		{
			stream.WriteByte(194);
			stream.WriteByte(2);
			obj.SetLength(0L);
			SpinnerWheel.Serialize(obj, instance.spinnerWheel);
			uint num38 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num38);
			stream.Write(obj.GetBuffer(), 0, (int)num38);
		}
		if (instance.lift != null)
		{
			stream.WriteByte(202);
			stream.WriteByte(2);
			obj.SetLength(0L);
			Lift.Serialize(obj, instance.lift);
			uint num39 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num39);
			stream.Write(obj.GetBuffer(), 0, (int)num39);
		}
		if (instance.bradley != null)
		{
			stream.WriteByte(210);
			stream.WriteByte(2);
			obj.SetLength(0L);
			BradleyAPC.Serialize(obj, instance.bradley);
			uint num40 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num40);
			stream.Write(obj.GetBuffer(), 0, (int)num40);
		}
		if (instance.waterwell != null)
		{
			stream.WriteByte(218);
			stream.WriteByte(2);
			obj.SetLength(0L);
			WaterWell.Serialize(obj, instance.waterwell);
			uint num41 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num41);
			stream.Write(obj.GetBuffer(), 0, (int)num41);
		}
		if (instance.motorBoat != null)
		{
			stream.WriteByte(226);
			stream.WriteByte(2);
			obj.SetLength(0L);
			Motorboat.Serialize(obj, instance.motorBoat);
			uint num42 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num42);
			stream.Write(obj.GetBuffer(), 0, (int)num42);
		}
		if (instance.ioEntity != null)
		{
			stream.WriteByte(234);
			stream.WriteByte(2);
			obj.SetLength(0L);
			IOEntity.Serialize(obj, instance.ioEntity);
			uint num43 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num43);
			stream.Write(obj.GetBuffer(), 0, (int)num43);
		}
		if (instance.puzzleReset != null)
		{
			stream.WriteByte(242);
			stream.WriteByte(2);
			obj.SetLength(0L);
			PuzzleReset.Serialize(obj, instance.puzzleReset);
			uint num44 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num44);
			stream.Write(obj.GetBuffer(), 0, (int)num44);
		}
		if (instance.relationshipManager != null)
		{
			stream.WriteByte(250);
			stream.WriteByte(2);
			obj.SetLength(0L);
			RelationshipManager.Serialize(obj, instance.relationshipManager);
			uint num45 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num45);
			stream.Write(obj.GetBuffer(), 0, (int)num45);
		}
		if (instance.hotAirBalloon != null)
		{
			stream.WriteByte(130);
			stream.WriteByte(3);
			obj.SetLength(0L);
			HotAirBalloon.Serialize(obj, instance.hotAirBalloon);
			uint num46 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num46);
			stream.Write(obj.GetBuffer(), 0, (int)num46);
		}
		if (instance.samSite != null)
		{
			stream.WriteByte(138);
			stream.WriteByte(3);
			obj.SetLength(0L);
			SAMSite.Serialize(obj, instance.samSite);
			uint num47 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num47);
			stream.Write(obj.GetBuffer(), 0, (int)num47);
		}
		if (instance.eggHunt != null)
		{
			stream.WriteByte(146);
			stream.WriteByte(3);
			obj.SetLength(0L);
			EggHunt.Serialize(obj, instance.eggHunt);
			uint num48 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num48);
			stream.Write(obj.GetBuffer(), 0, (int)num48);
		}
		if (instance.arcadeMachine != null)
		{
			stream.WriteByte(154);
			stream.WriteByte(3);
			obj.SetLength(0L);
			ArcadeMachine.Serialize(obj, instance.arcadeMachine);
			uint num49 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num49);
			stream.Write(obj.GetBuffer(), 0, (int)num49);
		}
		if (instance.miniCopter != null)
		{
			stream.WriteByte(162);
			stream.WriteByte(3);
			obj.SetLength(0L);
			Minicopter.Serialize(obj, instance.miniCopter);
			uint num50 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num50);
			stream.Write(obj.GetBuffer(), 0, (int)num50);
		}
		if (instance.horse != null)
		{
			stream.WriteByte(170);
			stream.WriteByte(3);
			obj.SetLength(0L);
			Horse.Serialize(obj, instance.horse);
			uint num51 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num51);
			stream.Write(obj.GetBuffer(), 0, (int)num51);
		}
		if (instance.smartAlarm != null)
		{
			stream.WriteByte(178);
			stream.WriteByte(3);
			obj.SetLength(0L);
			SmartAlarm.Serialize(obj, instance.smartAlarm);
			uint num52 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num52);
			stream.Write(obj.GetBuffer(), 0, (int)num52);
		}
		if (instance.lightString != null)
		{
			stream.WriteByte(186);
			stream.WriteByte(3);
			obj.SetLength(0L);
			LightString.Serialize(obj, instance.lightString);
			uint num53 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num53);
			stream.Write(obj.GetBuffer(), 0, (int)num53);
		}
		if (instance.lightDeployer != null)
		{
			stream.WriteByte(194);
			stream.WriteByte(3);
			obj.SetLength(0L);
			LightDeployer.Serialize(obj, instance.lightDeployer);
			uint num54 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num54);
			stream.Write(obj.GetBuffer(), 0, (int)num54);
		}
		if (instance.rcEntity != null)
		{
			stream.WriteByte(202);
			stream.WriteByte(3);
			obj.SetLength(0L);
			RCEntity.Serialize(obj, instance.rcEntity);
			uint num55 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num55);
			stream.Write(obj.GetBuffer(), 0, (int)num55);
		}
		if (instance.computerStation != null)
		{
			stream.WriteByte(210);
			stream.WriteByte(3);
			obj.SetLength(0L);
			ComputerStation.Serialize(obj, instance.computerStation);
			uint num56 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num56);
			stream.Write(obj.GetBuffer(), 0, (int)num56);
		}
		if (instance.growableEntity != null)
		{
			stream.WriteByte(218);
			stream.WriteByte(3);
			obj.SetLength(0L);
			GrowableEntity.Serialize(obj, instance.growableEntity);
			uint num57 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num57);
			stream.Write(obj.GetBuffer(), 0, (int)num57);
		}
		if (instance.composter != null)
		{
			stream.WriteByte(226);
			stream.WriteByte(3);
			obj.SetLength(0L);
			Composter.Serialize(obj, instance.composter);
			uint num58 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num58);
			stream.Write(obj.GetBuffer(), 0, (int)num58);
		}
		if (instance.modularVehicle != null)
		{
			stream.WriteByte(234);
			stream.WriteByte(3);
			obj.SetLength(0L);
			ModularVehicle.Serialize(obj, instance.modularVehicle);
			uint num59 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num59);
			stream.Write(obj.GetBuffer(), 0, (int)num59);
		}
		if (instance.modularCar != null)
		{
			stream.WriteByte(242);
			stream.WriteByte(3);
			obj.SetLength(0L);
			ModularCar.Serialize(obj, instance.modularCar);
			uint num60 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num60);
			stream.Write(obj.GetBuffer(), 0, (int)num60);
		}
		if (instance.simpleUID != null)
		{
			stream.WriteByte(250);
			stream.WriteByte(3);
			obj.SetLength(0L);
			SimpleUID.Serialize(obj, instance.simpleUID);
			uint num61 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num61);
			stream.Write(obj.GetBuffer(), 0, (int)num61);
		}
		if (instance.vehicleLift != null)
		{
			stream.WriteByte(130);
			stream.WriteByte(4);
			obj.SetLength(0L);
			VehicleLift.Serialize(obj, instance.vehicleLift);
			uint num62 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num62);
			stream.Write(obj.GetBuffer(), 0, (int)num62);
		}
		if (instance.engineStorage != null)
		{
			stream.WriteByte(138);
			stream.WriteByte(4);
			obj.SetLength(0L);
			EngineStorage.Serialize(obj, instance.engineStorage);
			uint num63 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num63);
			stream.Write(obj.GetBuffer(), 0, (int)num63);
		}
		if (instance.vehicleVendor != null)
		{
			stream.WriteByte(146);
			stream.WriteByte(4);
			obj.SetLength(0L);
			VehicleVendor.Serialize(obj, instance.vehicleVendor);
			uint num64 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num64);
			stream.Write(obj.GetBuffer(), 0, (int)num64);
		}
		if (instance.WaterPool != null)
		{
			stream.WriteByte(154);
			stream.WriteByte(4);
			obj.SetLength(0L);
			WaterPool.Serialize(obj, instance.WaterPool);
			uint num65 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num65);
			stream.Write(obj.GetBuffer(), 0, (int)num65);
		}
		if (instance.photo != null)
		{
			stream.WriteByte(162);
			stream.WriteByte(4);
			obj.SetLength(0L);
			Photo.Serialize(obj, instance.photo);
			uint num66 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num66);
			stream.Write(obj.GetBuffer(), 0, (int)num66);
		}
		if (instance.photoFrame != null)
		{
			stream.WriteByte(170);
			stream.WriteByte(4);
			obj.SetLength(0L);
			PhotoFrame.Serialize(obj, instance.photoFrame);
			uint num67 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num67);
			stream.Write(obj.GetBuffer(), 0, (int)num67);
		}
		if (instance.vehicleModule != null)
		{
			stream.WriteByte(178);
			stream.WriteByte(4);
			obj.SetLength(0L);
			VehicleModule.Serialize(obj, instance.vehicleModule);
			uint num68 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num68);
			stream.Write(obj.GetBuffer(), 0, (int)num68);
		}
		if (instance.mixingTable != null)
		{
			stream.WriteByte(186);
			stream.WriteByte(4);
			obj.SetLength(0L);
			MixingTable.Serialize(obj, instance.mixingTable);
			uint num69 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num69);
			stream.Write(obj.GetBuffer(), 0, (int)num69);
		}
		if (instance.shopKeeper != null)
		{
			stream.WriteByte(194);
			stream.WriteByte(4);
			obj.SetLength(0L);
			ShopKeeper.Serialize(obj, instance.shopKeeper);
			uint num70 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num70);
			stream.Write(obj.GetBuffer(), 0, (int)num70);
		}
		if (instance.elevator != null)
		{
			stream.WriteByte(202);
			stream.WriteByte(4);
			obj.SetLength(0L);
			Elevator.Serialize(obj, instance.elevator);
			uint num71 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num71);
			stream.Write(obj.GetBuffer(), 0, (int)num71);
		}
		if (instance.skullTrophy != null)
		{
			stream.WriteByte(210);
			stream.WriteByte(4);
			obj.SetLength(0L);
			SkullTrophy.Serialize(obj, instance.skullTrophy);
			uint num72 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num72);
			stream.Write(obj.GetBuffer(), 0, (int)num72);
		}
		if (instance.cassette != null)
		{
			stream.WriteByte(218);
			stream.WriteByte(4);
			obj.SetLength(0L);
			Cassette.Serialize(obj, instance.cassette);
			uint num73 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num73);
			stream.Write(obj.GetBuffer(), 0, (int)num73);
		}
		if (instance.telephone != null)
		{
			stream.WriteByte(226);
			stream.WriteByte(4);
			obj.SetLength(0L);
			Telephone.Serialize(obj, instance.telephone);
			uint num74 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num74);
			stream.Write(obj.GetBuffer(), 0, (int)num74);
		}
		if (instance.boomBox != null)
		{
			stream.WriteByte(234);
			stream.WriteByte(4);
			obj.SetLength(0L);
			BoomBox.Serialize(obj, instance.boomBox);
			uint num75 = (uint)obj.Length;
			ProtocolParser.WriteUInt32(stream, num75);
			stream.Write(obj.GetBuffer(), 0, (int)num75);
		}
		stream.WriteByte(160);
		stream.WriteByte(6);
		ProtocolParser.WriteBool(stream, instance.createdThisFrame);
		Pool.FreeMemoryStream(ref obj);
	}

	public byte[] ToProtoBytes()
	{
		return SerializeToBytes(this);
	}

	public void ToProto(Stream stream)
	{
		Serialize(stream, this);
	}

	public static byte[] SerializeToBytes(Entity instance)
	{
		using MemoryStream memoryStream = new MemoryStream();
		Serialize(memoryStream, instance);
		return memoryStream.ToArray();
	}

	public static void SerializeLengthDelimited(Stream stream, Entity instance)
	{
		byte[] array = SerializeToBytes(instance);
		ProtocolParser.WriteUInt32(stream, (uint)array.Length);
		stream.Write(array, 0, array.Length);
	}
}
