using UnityEngine;
using UnityEngine.Events;

public class NeedsKeyboard : ListComponent<NeedsKeyboard>
{
	public UnityEvent onNoKeysDown;

	public bool ShowEscapeUI;

	private bool watchForNoKeys;

	public static bool ShouldShowUI
	{
		get
		{
			if (ListComponent<NeedsKeyboard>.InstanceList.Count > 0)
			{
				return ListComponent<NeedsKeyboard>.InstanceList[0].ShowEscapeUI;
			}
			return false;
		}
	}

	public static bool AnyActive()
	{
		return ListComponent<NeedsKeyboard>.InstanceList.Count > 0;
	}

	protected override void OnEnable()
	{
		base.OnEnable();
		watchForNoKeys = true;
	}

	public void Update()
	{
		if (watchForNoKeys && !Input.anyKey)
		{
			watchForNoKeys = false;
			onNoKeysDown?.Invoke();
		}
	}
}
