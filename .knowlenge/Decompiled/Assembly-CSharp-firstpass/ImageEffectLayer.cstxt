#define UNITY_ASSERTIONS
using UnityEngine;

public class ImageEffectLayer : FacepunchBehaviour
{
	protected int sortOrder;

	private IImageEffect[] effects;

	internal bool _layerEnabled = true;

	public int SortOrder => sortOrder;

	public IImageEffect[] Effects => effects;

	public bool layerEnabled
	{
		get
		{
			return _layerEnabled;
		}
		set
		{
			if (_layerEnabled != value)
			{
				_layerEnabled = value;
			}
		}
	}

	public virtual void Start()
	{
		Debug.Assert(effects == null, "effects is null!");
		Camera component = base.transform.parent.GetComponent<Camera>();
		Debug.Assert(component != null, "camera is null!");
		ImageEffectComposite component2 = component.gameObject.GetComponent<ImageEffectComposite>();
		if (component2 != null)
		{
			component2.Add(this);
		}
		effects = GetComponents<IImageEffect>();
	}

	public virtual void OnDisable()
	{
		if (effects != null)
		{
			ImageEffectComposite component = base.transform.parent.GetComponent<ImageEffectComposite>();
			if (component != null)
			{
				component.Remove(this);
			}
		}
	}
}
