using System;
using Facepunch.Models;
using Newtonsoft.Json;

public class Manifest
{
	public class Administrator
	{
		public string UserId;

		public string Level;
	}

	public class NewsInfo
	{
		public class StatusInfo
		{
			public DateTime DateTime;

			public string Content;

			public string Type;
		}

		public StatusInfo[] Status;
	}

	public class ServersInfo
	{
		public ServerDesc[] Official;

		public string[] Banned;

		public bool IsBannedServer(string ip)
		{
			string[] banned = Banned;
			foreach (string value in banned)
			{
				if (ip.StartsWith(value))
				{
					return true;
				}
			}
			return false;
		}
	}

	public class ServerDesc
	{
		public string Address;

		public int Port;
	}

	public NewsInfo News;

	public ServersInfo Servers;

	public string ExceptionReportingUrl;

	public string BenchmarkUrl;

	public string AnalyticUrl;

	public string DatabaseUrl;

	public string FeedbackUrl;

	public Administrator[] Administrators;

	internal static Manifest FromJson(string text)
	{
		Manifest manifest = JsonConvert.DeserializeObject<Manifest>(text);
		if (manifest == null)
		{
			return null;
		}
		if (manifest.Servers == null)
		{
			return null;
		}
		return manifest;
	}
}
