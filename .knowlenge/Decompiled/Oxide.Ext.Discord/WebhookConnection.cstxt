using Oxide.Ext.Discord.Entities;
using Oxide.Ext.Discord.Logging;
using Oxide.Ext.Discord.Types;

public class WebhookConnection
{
	public readonly Snowflake WebhookId;

	public readonly string WebhookToken;

	public readonly string WebhookUrl;

	public DiscordLogLevel LogLevel { get; set; }

	public WebhookConnection(string webhookUrl, DiscordLogLevel logLevel = DiscordLogLevel.Info)
	{
		WebhookUrl = webhookUrl;
		ReverseStringTokenizer reverseStringTokenizer = new ReverseStringTokenizer(webhookUrl, "/");
		if (reverseStringTokenizer.MoveNext())
		{
			WebhookToken = reverseStringTokenizer.Current.ToString();
		}
		if (reverseStringTokenizer.MoveNext())
		{
			Snowflake.TryParse(reverseStringTokenizer.Current, out WebhookId);
		}
		LogLevel = logLevel;
	}
}
