using Oxide.Ext.Discord.Exceptions;

public class InvalidWebhookException : BaseDiscordException
{
	public static readonly char[] InvalidUserNameCharacters = "@#:".ToCharArray();

	private InvalidWebhookException(string message)
		: base(message)
	{
	}

	internal static void ThrowIfInvalidName(string name)
	{
		if (string.IsNullOrEmpty(name) || name.Length > 80)
		{
			throw new InvalidWebhookException($"Name '{name}' cannot be less than 1 character or more than {80} characters");
		}
		if (name.IndexOfAny(InvalidUserNameCharacters) != -1)
		{
			throw new InvalidWebhookException("Name '" + name + "' Cannot contain any of the following characters [@,#,:]");
		}
		if (name.Contains("```"))
		{
			throw new InvalidWebhookException("Name '" + name + "' Cannot contain \"```\"");
		}
		if (name.Contains("discord"))
		{
			throw new InvalidWebhookException("Name '" + name + "' Cannot contain \"discord\"");
		}
	}
}
