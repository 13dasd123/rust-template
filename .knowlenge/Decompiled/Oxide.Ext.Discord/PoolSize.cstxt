using Oxide.Ext.Discord.Exceptions;

public readonly struct PoolSize
{
	public readonly int StartingSize;

	public readonly int MaxSize;

	public bool IsValid => StartingSize > 0 && MaxSize >= StartingSize;

	public PoolSize(int startingSize, int maxSize)
	{
		InvalidPoolException.ThrowIfNotPowerOf2(startingSize, "startingSize");
		InvalidPoolException.ThrowIfNotPowerOf2(maxSize, "maxSize");
		StartingSize = startingSize;
		MaxSize = maxSize;
	}

	public bool CanResize(int currentSize)
	{
		return GetNextSize(currentSize) <= MaxSize;
	}

	public int GetNextSize(int currentSize)
	{
		return currentSize << 1;
	}
}
