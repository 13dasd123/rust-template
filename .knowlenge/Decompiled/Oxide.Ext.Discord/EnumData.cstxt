using System;
using System.Reflection;
using Oxide.Ext.Discord.Attributes;
using Oxide.Ext.Discord.Extensions;
using Oxide.Plugins;

internal class EnumData
{
	public readonly object Default;

	public readonly Hash<string, string> NameToProperty = new Hash<string, string>();

	public readonly Hash<string, string> PropertyToName = new Hash<string, string>();

	public EnumData(Type type)
	{
		Default = type.GetDefault();
		FieldInfo[] fields = type.GetFields();
		foreach (FieldInfo fieldInfo in fields)
		{
			string name = fieldInfo.Name;
			string propertyName = fieldInfo.GetCustomAttribute<DiscordEnumAttribute>()?.Name ?? fieldInfo.Name;
			Add(name, propertyName);
		}
	}

	private void Add(string name, string propertyName)
	{
		NameToProperty[name] = propertyName;
		PropertyToName[propertyName] = name;
	}
}
