using Newtonsoft.Json;
using Oxide.Ext.Discord.Entities;
using Oxide.Ext.Discord.Libraries;
using Oxide.Ext.Discord.Types;

[JsonObject(MemberSerialization = MemberSerialization.OptIn)]
public class CommandPayload : BasePoolable
{
	[JsonProperty("op")]
	public GatewayCommandCode OpCode;

	[JsonProperty("d")]
	public object Payload;

	public static CommandPayload CreatePayload(GatewayCommandCode code, object payload)
	{
		CommandPayload commandPayload = DiscordPool.Internal.Get<CommandPayload>();
		commandPayload.Init(code, payload);
		return commandPayload;
	}

	private void Init(GatewayCommandCode code, object payload)
	{
		OpCode = code;
		Payload = payload;
	}

	protected override void EnterPool()
	{
		OpCode = (GatewayCommandCode)0;
		Payload = null;
	}
}
