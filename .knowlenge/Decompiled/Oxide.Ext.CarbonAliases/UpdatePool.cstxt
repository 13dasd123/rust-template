using System;
using Oxide.Game.Rust.Cui;

public class UpdatePool : CuiElementContainer, IDisposable
{
	internal bool _hasDisposed;

	public void Add(Pair<string, CuiElement> pair)
	{
		if (pair.Element != null && pair.Element.Update)
		{
			Add(pair.Element);
		}
	}

	public void Add(Pair<string, CuiElement, CuiElement> pair)
	{
		if (pair.Element1 != null)
		{
			if (!pair.Element1.Update)
			{
				return;
			}
			Add(pair.Element1);
		}
		if (pair.Element2 != null && pair.Element2.Update)
		{
			Add(pair.Element2);
		}
	}

	public void Send(BasePlayer player)
	{
		CuiHelper.AddUi(player, this);
		Dispose();
	}

	public void Dispose()
	{
		if (!_hasDisposed)
		{
			Clear();
			_hasDisposed = true;
		}
	}
}
