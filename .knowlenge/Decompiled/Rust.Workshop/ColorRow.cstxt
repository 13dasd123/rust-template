using Rust.Workshop.Editor;
using UnityEngine;
using UnityEngine.UI;

public class ColorRow : MaterialRow
{
	public Button Reset;

	public Slider Red;

	public Slider Green;

	public Slider Blue;

	private Color Default;

	public bool IsDefault
	{
		get
		{
			if (Default.r == Red.value && Green.value == Default.g)
			{
				return Blue.value == Default.b;
			}
			return false;
		}
	}

	public void Update()
	{
		Reset.gameObject.SetActive(!IsDefault);
	}

	public override void Read(Material source, Material def)
	{
		Color color = source.GetColor(ParamName);
		Red.value = color.r;
		Green.value = color.g;
		Blue.value = color.b;
		Default = def.GetColor(ParamName);
		base.Editor.SetColor(ParamName, color);
	}

	public void ResetToDefault()
	{
		Red.value = Default.r;
		Green.value = Default.g;
		Blue.value = Default.b;
		base.Editor.SetColor(ParamName, Default);
	}

	public void OnChanged()
	{
		base.Editor.SetColor(ParamName, new Color(Red.value, Green.value, Blue.value));
	}
}
